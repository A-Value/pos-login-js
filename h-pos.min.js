!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("zoid",[],n):"object"==typeof exports?exports.zoid=n():e.zoid=n()}("undefined"!=typeof self?self:this,function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s="./src/index.js")}({"./node_modules/beaver-logger/client/builders.js":function(e,n,t){"use strict";n.__esModule=!0,n.addPayloadBuilder=function(e){r.push(e)},n.addMetaBuilder=function(e){o.push(e)},n.addTrackingBuilder=function(e){i.push(e)},n.addHeaderBuilder=function(e){s.push(e)};var r=n.payloadBuilders=[],o=n.metaBuilders=[],i=n.trackingBuilders=[],s=n.headerBuilders=[]},"./node_modules/beaver-logger/client/config.js":function(e,n,t){"use strict";n.__esModule=!0,n.config={uri:"",prefix:"",initial_state_name:"init",flushInterval:6e5,debounceInterval:10,sizeLimit:300,silent:!1,heartbeat:!0,heartbeatConsoleLog:!0,heartbeatInterval:5e3,heartbeatTooBusy:!1,heartbeatTooBusyThreshold:1e4,logLevel:"warn",autoLog:["warn","error"],logUnload:!0,logPerformance:!0},n.logLevels=["error","warn","info","debug"]},"./node_modules/beaver-logger/client/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/beaver-logger/client/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(r);n.default=o},"./node_modules/beaver-logger/client/init.js":function(e,n,t){"use strict";n.__esModule=!0,n.init=function(e){(0,o.extend)(r.config,e||{}),a||(a=!0,r.config.logPerformance&&(0,i.initPerformance)(),r.config.heartbeat&&(0,i.initHeartBeat)(),r.config.logUnload&&(window.addEventListener("beforeunload",function(){(0,s.info)("window_beforeunload"),(0,s.immediateFlush)({fireAndForget:!0})}),window.addEventListener("unload",function(){(0,s.info)("window_unload"),(0,s.immediateFlush)({fireAndForget:!0})})),r.config.flushInterval&&setInterval(s.flush,r.config.flushInterval),window.beaverLogQueue&&(window.beaverLogQueue.forEach(function(e){(0,s.log)(e.level,e.event,e)}),delete window.beaverLogQueue))};var r=t("./node_modules/beaver-logger/client/config.js"),o=t("./node_modules/beaver-logger/client/util.js"),i=t("./node_modules/beaver-logger/client/performance.js"),s=t("./node_modules/beaver-logger/client/logger.js"),a=!1},"./node_modules/beaver-logger/client/interface.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/beaver-logger/client/logger.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/beaver-logger/client/init.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./node_modules/beaver-logger/client/transitions.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./node_modules/beaver-logger/client/builders.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var a=t("./node_modules/beaver-logger/client/config.js");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})},"./node_modules/beaver-logger/client/logger.js":function(e,n,t){"use strict";n.__esModule=!0,n.track=n.flush=n.tracking=n.buffer=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.getTransport=function(){return u},n.setTransport=function(e){u=e},n.print=d,n.immediateFlush=f,n.log=h,n.prefix=function(e){return{debug:function(n,t){return h("debug",e+"_"+n,t)},info:function(n,t){return h("info",e+"_"+n,t)},warn:function(n,t){return h("warn",e+"_"+n,t)},error:function(n,t){return h("error",e+"_"+n,t)},track:function(e){return g(e)},flush:function(){return p()}}},n.debug=function(e,n){return h("debug",e,n)},n.info=function(e,n){return h("info",e,n)},n.warn=function(e,n){return h("warn",e,n)},n.error=function(e,n){return h("error",e,n)};var o=t("./node_modules/beaver-logger/client/util.js"),i=t("./node_modules/beaver-logger/client/builders.js"),s=t("./node_modules/beaver-logger/client/config.js"),a=n.buffer=[],c=n.tracking=[];Function.prototype.bind&&window.console&&"object"===r(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var u=function(e,n,t){return(0,o.ajax)("post",s.config.uri,e,n,t)},l=!1;function d(e,n,t){if(!l)return setTimeout(function(){return d(e,n,t)},1);if(window.console&&window.console.log){var r=window.LOG_LEVEL||s.config.logLevel;if(!(s.logLevels.indexOf(e)>s.logLevels.indexOf(r))){t=t||{};var i=[n];(0,o.isIE)()&&(t=JSON.stringify(t)),i.push(t),(t.error||t.warning)&&i.push("\n\n",t.error||t.warning);try{window.console[e]&&window.console[e].apply?window.console[e].apply(window.console,i):window.console.log&&window.console.log.apply&&window.console.log.apply(window.console,i)}catch(e){}}}}function f(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).fireAndForget,t=void 0!==e&&e;if(s.config.uri){var r=a.length,l=c.length;if(r||l){var d={},f=i.metaBuilders,p=Array.isArray(f),m=0;for(f=p?f:f[Symbol.iterator]();;){var h;if(p){if(m>=f.length)break;h=f[m++]}else{if((m=f.next()).done)break;h=m.value}var g=h;try{(0,o.extend)(d,g(d),!1)}catch(e){console.error("Error in custom meta builder:",e.stack||e.toString())}}var w={},y=i.headerBuilders,v=Array.isArray(y),b=0;for(y=v?y:y[Symbol.iterator]();;){var E;if(v){if(b>=y.length)break;E=y[b++]}else{if((b=y.next()).done)break;E=b.value}var _=E;try{(0,o.extend)(w,_(w),!1)}catch(e){console.error("Error in custom header builder:",e.stack||e.toString())}}var S=u(w,{events:a,meta:d,tracking:c},{fireAndForget:t});return n.buffer=a=[],n.tracking=c=[],S}}}setTimeout(function(){l=!0},1);var p=(0,o.promiseDebounce)(f,s.config.debounceInterval);function m(e,n,t){a.push({level:e,event:n,payload:t}),s.config.autoLog.indexOf(e)>-1&&p()}function h(e,n,t){s.config.prefix&&(n=s.config.prefix+"_"+n),"string"==typeof(t=t||{})?t={message:t}:t instanceof Error&&(t={error:t.stack||t.toString()});try{JSON.stringify(t)}catch(e){return}t.timestamp=Date.now();var r=i.payloadBuilders,c=Array.isArray(r),u=0;for(r=c?r:r[Symbol.iterator]();;){var l;if(c){if(u>=r.length)break;l=r[u++]}else{if((u=r.next()).done)break;l=u.value}var f=l;try{(0,o.extend)(t,f(t),!1)}catch(e){console.error("Error in custom payload builder:",e.stack||e.toString())}}s.config.silent||d(e,n,t),a.length===s.config.sizeLimit?m("info","logger_max_buffer_length"):a.length<s.config.sizeLimit&&m(e,n,t)}function g(e){if(e){try{JSON.stringify(e)}catch(e){return}var n=i.trackingBuilders,t=Array.isArray(n),r=0;for(n=t?n:n[Symbol.iterator]();;){var s;if(t){if(r>=n.length)break;s=n[r++]}else{if((r=n.next()).done)break;s=r.value}var a=s;try{(0,o.extend)(e,a(e),!1)}catch(e){console.error("Error in custom tracking builder:",e.stack||e.toString())}}d("debug","tracking",e),c.push(e)}}n.flush=p,n.track=g},"./node_modules/beaver-logger/client/performance.js":function(e,n,t){"use strict";n.__esModule=!0,n.reqTimer=n.clientTimer=void 0,n.now=c,n.reqStartElapsed=l,n.initHeartBeat=function(){var e=u(),n=0;(0,s.safeInterval)(function(){if(!(r.config.heartbeatMaxThreshold&&n>r.config.heartbeatMaxThreshold)){n+=1;var t=e.elapsed(),i=t-r.config.heartbeatInterval,s={count:n,elapsed:t};r.config.heartbeatTooBusy&&(s.lag=i,i>=r.config.heartbeatTooBusyThreshold&&(0,o.info)("toobusy",s,{noConsole:!r.config.heartbeatConsoleLog})),(0,o.info)("heartbeat",s,{noConsole:!r.config.heartbeatConsoleLog})}},r.config.heartbeatInterval)},n.initPerformance=function(){if(!a)return(0,o.info)("no_performance_data");(0,i.addPayloadBuilder)(function(){var e={};return e.client_elapsed=d.elapsed(),a&&(e.req_elapsed=f.elapsed()),e}),s.windowReady.then(function(){var e={};["connectEnd","connectStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","domainLookupEnd","domainLookupStart","fetchStart","loadEventEnd","loadEventStart","navigationStart","redirectEnd","redirectStart","requestStart","responseEnd","responseStart","secureConnectionStart","unloadEventEnd","unloadEventStart"].forEach(function(n){e[n]=parseInt(window.performance.timing[n],10)||0});var n=e.connectEnd-e.navigationStart;e.connectEnd&&Object.keys(e).forEach(function(t){var r=e[t];r&&(0,o.info)("timing_"+t,{client_elapsed:parseInt(r-e.connectEnd-(d.startTime-n),10),req_elapsed:parseInt(r-e.connectEnd,10)})}),(0,o.info)("timing",e),(0,o.info)("memory",window.performance.memory),(0,o.info)("navigation",window.performance.navigation),window.performance.getEntries&&window.performance.getEntries().forEach(function(e){["link","script","img","css"].indexOf(e.initiatorType)>-1&&(0,o.info)(e.initiatorType,e)})})};var r=t("./node_modules/beaver-logger/client/config.js"),o=t("./node_modules/beaver-logger/client/logger.js"),i=t("./node_modules/beaver-logger/client/builders.js"),s=t("./node_modules/beaver-logger/client/util.js"),a=window&&window.performance&&performance.now&&performance.timing&&performance.timing.connectEnd&&performance.timing.navigationStart&&Math.abs(performance.now()-Date.now())>1e3&&performance.now()-(performance.timing.connectEnd-performance.timing.navigationStart)>0;function c(){return a?performance.now():Date.now()}function u(e){return{startTime:e=void 0!==e?e:c(),elapsed:function(){return parseInt(c()-e,10)},reset:function(){e=c()}}}function l(){if(a){var e=window.performance.timing;return parseInt(e.connectEnd-e.navigationStart,10)}}var d=n.clientTimer=u(),f=n.reqTimer=u(l())},"./node_modules/beaver-logger/client/transitions.js":function(e,n,t){"use strict";n.__esModule=!0,n.startTransition=f,n.endTransition=p,n.transition=function(e){f(),p(e)};var r=t("./node_modules/beaver-logger/client/performance.js"),o=t("./node_modules/beaver-logger/client/logger.js"),i=t("./node_modules/beaver-logger/client/builders.js"),s=t("./node_modules/beaver-logger/client/util.js"),a=t("./node_modules/beaver-logger/client/config.js"),c=(0,s.uniqueID)(),u=(0,s.uniqueID)(),l=a.config.initial_state_name,d=void 0;function f(){d=(0,r.now)()}function p(e){d=d||(0,r.reqStartElapsed)();var n=(0,r.now)(),t=void 0;void 0!==d&&(t=parseInt(n-d,0));var i="transition_"+l+"_to_"+e;(0,o.info)(i,{duration:t}),(0,o.track)({transition:i,transition_time:t}),(0,o.immediateFlush)(),d=n,l=e,u=(0,s.uniqueID)()}(0,i.addPayloadBuilder)(function(){return{windowID:c,pageID:u}}),(0,i.addMetaBuilder)(function(){return{state:"ui_"+l}})},"./node_modules/beaver-logger/client/util.js":function(e,n,t){"use strict";n.__esModule=!0,n.windowReady=void 0,n.extend=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var r in e=e||{},n=n||{})n.hasOwnProperty(r)&&(!t&&e.hasOwnProperty(r)||(e[r]=n[r]));return e},n.isSameProtocol=o,n.isSameDomain=i,n.ajax=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(arguments.length>4&&void 0!==arguments[4]?arguments[4]:{}).fireAndForget,c=void 0!==a&&a;return new r.ZalgoPromise(function(r){var a=window.XMLHttpRequest||window.ActiveXObject;if(window.XDomainRequest&&!i(n)){if(!o(n))return r();a=window.XDomainRequest}var u=new a("MSXML2.XMLHTTP.3.0");if(u.open(e.toUpperCase(),n,!0),"function"==typeof u.setRequestHeader)for(var l in u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-type","application/json"),t)t.hasOwnProperty(l)&&u.setRequestHeader(l,t[l]);c?r():u.onreadystatechange=function(){u.readyState>3&&r()},u.send(JSON.stringify(s).replace(/&/g,"%26"))})},n.promiseDebounce=function(e,n){var t={};return function(){var o=arguments;return t.timeout&&(clearTimeout(t.timeout),delete t.timeout),t.timeout=setTimeout(function(){var n=t.resolver,i=t.rejector;return delete t.promise,delete t.resolver,delete t.rejector,delete t.timeout,r.ZalgoPromise.resolve().then(function(){return e.apply(null,o)}).then(n,i)},n),t.promise=t.promise||new r.ZalgoPromise(function(e,n){t.resolver=e,t.rejector=n}),t.promise}},n.safeInterval=function(e,n){var t=void 0;return function r(){t=setTimeout(function(){e(),r()},n)}(),{cancel:function(){clearTimeout(t)}}},n.uniqueID=function(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})},n.isIE=function(){return Boolean(window.document.documentMode)};var r=t("./node_modules/zalgo-promise/src/index.js");function o(e){return window.location.protocol===e.split("/")[0]}function i(e){var n=e.match(/https?:\/\/[^/]+/);return!n||n[0]===window.location.protocol+"//"+window.location.host}n.windowReady=new r.ZalgoPromise(function(e){"undefined"!=typeof document&&"complete"===document.readyState&&e(),window.addEventListener&&window.addEventListener("load",e)})},"./node_modules/cross-domain-safe-weakmap/src/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/cross-domain-safe-weakmap/src/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(r);n.default=o},"./node_modules/cross-domain-safe-weakmap/src/interface.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/cross-domain-safe-weakmap/src/weakmap.js");Object.defineProperty(n,"WeakMap",{enumerable:!0,get:function(){return r.CrossDomainSafeWeakMap}})},"./node_modules/cross-domain-safe-weakmap/src/native.js":function(e,n,t){"use strict";n.__esModule=!0,n.hasNativeWeakMap=function(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,n={};return window.Object.freeze(n),e.set(n,"__testvalue__"),"__testvalue__"===e.get(n)}catch(e){return!1}}},"./node_modules/cross-domain-safe-weakmap/src/util.js":function(e,n,t){"use strict";n.__esModule=!0,n.safeIndexOf=function(e,n){for(var t=0;t<e.length;t++)try{if(e[t]===n)return t}catch(e){}return-1},n.noop=function(){}},"./node_modules/cross-domain-safe-weakmap/src/weakmap.js":function(e,n,t){"use strict";n.__esModule=!0,n.CrossDomainSafeWeakMap=void 0;var r=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./node_modules/cross-domain-safe-weakmap/src/native.js"),i=t("./node_modules/cross-domain-safe-weakmap/src/util.js"),s=Object.defineProperty,a=Date.now()%1e9;n.CrossDomainSafeWeakMap=function(){function e(){if(function(n,t){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this),a+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+a,(0,o.hasNativeWeakMap)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return e.prototype._cleanupClosedWindows=function(){for(var e=this.weakmap,n=this.keys,t=0;t<n.length;t++){var o=n[t];if((0,r.isWindow)(o)&&(0,r.isWindowClosed)(o)){if(e)try{e.delete(o)}catch(e){}n.splice(t,1),this.values.splice(t,1),t-=1}}},e.prototype.isSafeToReadWrite=function(e){if((0,r.isWindow)(e))return!1;try{(0,i.noop)(e&&e.self),(0,i.noop)(e&&e[this.name])}catch(e){return!1}return!0},e.prototype.set=function(e,n){if(!e)throw new Error("WeakMap expected key");var t=this.weakmap;if(t)try{t.set(e,n)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var r=this.name,o=e[r];o&&o[0]===e?o[1]=n:s(e,r,{value:[e,n],writable:!0})}else{this._cleanupClosedWindows();var a=this.keys,c=this.values,u=(0,i.safeIndexOf)(a,e);-1===u?(a.push(e),c.push(n)):c[u]=n}},e.prototype.get=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{if(n.has(e))return n.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var t=this.keys,r=(0,i.safeIndexOf)(t,e);if(-1===r)return;return this.values[r]}var o=e[this.name];if(o&&o[0]===e)return o[1]},e.prototype.delete=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];t&&t[0]===e&&(t[0]=t[1]=void 0)}else{this._cleanupClosedWindows();var r=this.keys,o=(0,i.safeIndexOf)(r,e);-1!==o&&(r.splice(o,1),this.values.splice(o,1))}},e.prototype.has=function(e){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{return n.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=e[this.name];return!(!t||t[0]!==e)}return this._cleanupClosedWindows(),-1!==(0,i.safeIndexOf)(this.keys,e)},e}()},"./node_modules/cross-domain-utils/src/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/cross-domain-utils/src/utils.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/cross-domain-utils/src/types.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},"./node_modules/cross-domain-utils/src/types.js":function(e,n,t){"use strict"},"./node_modules/cross-domain-utils/src/util.js":function(e,n,t){"use strict";n.__esModule=!0,n.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},n.noop=function(){}},"./node_modules/cross-domain-utils/src/utils.js":function(e,n,t){"use strict";n.__esModule=!0,n.isFileProtocol=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.FILE_PROTOCOL},n.isAboutProtocol=s,n.getParent=a,n.getOpener=c,n.canReadFromWindow=u,n.getActualDomain=l,n.getDomain=d,n.isBlankDomain=function(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1},n.isActuallySameDomain=f,n.isSameDomain=p,n.getParents=m,n.isAncestorParent=h,n.getFrames=g,n.getAllChildFrames=w,n.getTop=y,n.getAllFramesInWindow=v,n.isTop=function(e){return e===y(e)},n.isFrameWindowClosed=b,n.isWindowClosed=S,n.linkFrameWindow=function(e){if(function(){for(var e=0;e<_.length;e++)b(_[e])&&(_.splice(e,1),E.splice(e,1));for(var n=0;n<E.length;n++)S(E[n])&&(_.splice(n,1),E.splice(n,1))}(),e&&e.contentWindow)try{E.push(e.contentWindow),_.push(e)}catch(e){}},n.getUserAgent=function(e){return(e=e||window).navigator.mockUserAgent||e.navigator.userAgent},n.getFrameByName=O,n.findChildFrameByName=T,n.findFrameByName=function(e,n){var t;return(t=O(e,n))?t:T(y(e)||e,n)},n.isParent=function(e,n){var t=a(n);if(t)return t===e;var r=g(e),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}if(s===n)return!0}return!1},n.isOpener=function(e,n){return e===c(n)},n.getAncestor=P,n.getAncestors=function(e){for(var n=[],t=e;t;)(t=P(t))&&n.push(t);return n},n.isAncestor=function(e,n){var t=P(n);if(t)return t===e;if(n===e)return!1;if(y(n)===n)return!1;var r=g(e),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}if(s===n)return!0}return!1},n.isPopup=A,n.isIframe=C,n.isFullpage=function(){return Boolean(!C()&&!A())},n.getDistanceFromTop=x,n.getNthParent=L,n.getNthParentFromTop=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return L(e,x(e)-n)},n.isSameTopWindow=function(e,n){var t=y(e)||e,r=y(n)||n;try{if(t&&r)return t===r}catch(e){}var o=v(e),i=v(n);if(j(o,i))return!0;var s=c(t),a=c(r);return(!s||!j(v(s),i))&&(a&&j(v(a),o),!1)},n.matchDomain=function e(n,t){if("string"==typeof n){if("string"==typeof t)return n===o.WILDCARD||t===n;if((0,r.isRegex)(t))return!1;if(Array.isArray(t))return!1}return(0,r.isRegex)(n)?(0,r.isRegex)(t)?n.toString()===t.toString():!Array.isArray(t)&&Boolean(t.match(n)):!!Array.isArray(n)&&(Array.isArray(t)?JSON.stringify(n)===JSON.stringify(t):!(0,r.isRegex)(t)&&n.some(function(n){return e(n,t)}))},n.stringifyDomainPattern=function(e){return Array.isArray(e)?"("+e.join(" | ")+")":(0,r.isRegex)(e)?"RegExp("+e.toString():e.toString()},n.getDomainFromUrl=function(e){return e.match(/^(https?|mock|file):\/\//)?e.split("/").slice(0,3).join("/"):d()},n.onCloseWindow=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=void 0;return function i(){if(S(e))return o&&clearTimeout(o),n();r<=0?clearTimeout(o):(r-=t,o=setTimeout(i,t))}(),{cancel:function(){o&&clearTimeout(o)}}},n.isWindow=function(e){try{if(e===window)return!0}catch(e){if(e&&e.message===i)return!0}try{if("[object Window]"===Object.prototype.toString.call(e))return!0}catch(e){if(e&&e.message===i)return!0}try{if(window.Window&&e instanceof window.Window)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.self===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.parent===e)return!0}catch(e){if(e&&e.message===i)return!0}try{if(e&&e.top===e)return!0}catch(e){if(e&&e.message===i)return!0}try{(0,r.noop)(e==e)}catch(e){return!0}try{(0,r.noop)(e&&e.__cross_domain_utils_window_check__)}catch(e){return!0}return!1};var r=t("./node_modules/cross-domain-utils/src/util.js"),o={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",ABOUT_PROTOCOL:"about:",WILDCARD:"*"},i="Call was rejected by callee.\r\n";function s(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:window).location.protocol===o.ABOUT_PROTOCOL}function a(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){}}function c(e){if(e&&!a(e))try{return e.opener}catch(e){}}function u(e){try{return(0,r.noop)(e&&e.location&&e.location.href),!0}catch(e){}return!1}function l(e){var n=e.location;if(!n)throw new Error("Can not read window location");var t=n.protocol;if(!t)throw new Error("Can not read window protocol");if(t===o.FILE_PROTOCOL)return o.FILE_PROTOCOL+"//";if(t===o.ABOUT_PROTOCOL){var r=a(e);return r&&u(e)?l(r):o.ABOUT_PROTOCOL+"//"}var i=n.host;if(!i)throw new Error("Can not read window host");return t+"//"+i}function d(e){var n=l(e=e||window);return n&&e.mockDomain&&0===e.mockDomain.indexOf(o.MOCK_PROTOCOL)?e.mockDomain:n}function f(e){try{if(e===window)return!0}catch(e){}try{var n=Object.getOwnPropertyDescriptor(e,"location");if(n&&!1===n.enumerable)return!1}catch(e){}try{if(s(e)&&u(e))return!0}catch(e){}try{if(l(e)===l(window))return!0}catch(e){}return!1}function p(e){if(!f(e))return!1;try{if(e===window)return!0;if(s(e)&&u(e))return!0;if(d(window)===d(e))return!0}catch(e){}return!1}function m(e){var n=[];try{for(;e.parent!==e;)n.push(e.parent),e=e.parent}catch(e){}return n}function h(e,n){if(!e||!n)return!1;var t=a(n);return t?t===e:-1!==m(n).indexOf(e)}function g(e){var n=[],t=void 0;try{t=e.frames}catch(n){t=e}var r=void 0;try{r=t.length}catch(e){}if(0===r)return n;if(r){for(var o=0;o<r;o++){var i=void 0;try{i=t[o]}catch(e){continue}n.push(i)}return n}for(var s=0;s<100;s++){var a=void 0;try{a=t[s]}catch(e){return n}if(!a)return n;n.push(a)}return n}function w(e){var n=[],t=g(e),r=Array.isArray(t),o=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i;n.push(s);var a=w(s),c=Array.isArray(a),u=0;for(a=c?a:a[Symbol.iterator]();;){var l;if(c){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var d=l;n.push(d)}}return n}function y(e){if(e){try{if(e.top)return e.top}catch(e){}if(a(e)===e)return e;try{if(h(window,e)&&window.top)return window.top}catch(e){}try{if(h(e,window)&&window.top)return window.top}catch(e){}var n=w(e),t=Array.isArray(n),r=0;for(n=t?n:n[Symbol.iterator]();;){var o;if(t){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o;try{if(i.top)return i.top}catch(e){}if(a(i)===i)return i}}}function v(e){var n=y(e);return w(n).concat(n)}function b(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var n=e.ownerDocument;return!(!n||!n.body||n.body.contains(e))}var E=[],_=[];function S(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||e.message!==i}if(n&&p(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{(0,r.noop)(e==e)}catch(e){return!0}var t=function(e,n){for(var t=0;t<e.length;t++)try{if(e[t]===n)return t}catch(e){}return-1}(E,e);if(-1!==t){var o=_[t];if(o&&b(o))return!0}return!1}function O(e,n){var t=g(e),r=t,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s;try{if(p(a)&&a.name===n&&-1!==t.indexOf(a))return a}catch(e){}}try{if(-1!==t.indexOf(e.frames[n]))return e.frames[n]}catch(e){}try{if(-1!==t.indexOf(e[n]))return e[n]}catch(e){}}function T(e,n){var t=O(e,n);if(t)return t;var r=g(e),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=T(s,n);if(a)return a}}function P(e){var n=c(e=e||window);return n||(a(e)||void 0)}function A(){return Boolean(c(window))}function C(){return Boolean(a(window))}function j(e,n){var t=e,r=Array.isArray(t),o=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i,a=n,c=Array.isArray(a),u=0;for(a=c?a:a[Symbol.iterator]();;){var l;if(c){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}if(s===l)return!0}}return!1}function x(){for(var e=0,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;n;)(n=a(n))&&(e+=1);return e}function L(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=e,r=0;r<n;r++){if(!t)return;t=a(t)}return t}},"./node_modules/hi-base32/src/base32.js":function(e,n,t){"use strict";(function(e,n,r){var o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var s="object"===("undefined"==typeof window?"undefined":i(window))?window:{};!s.HI_BASE32_NO_NODE_JS&&"object"===(void 0===e?"undefined":i(e))&&e.versions&&e.versions.node&&(s=n);var a=!s.HI_BASE32_NO_COMMON_JS&&"object"===i(r)&&r.exports,c=t("./node_modules/webpack/buildin/amd-options.js"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".split(""),l={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,2:26,3:27,4:28,5:29,6:30,7:31},d=[0,0,0,0,0,0,0,0],f=function(e,n){n.length>10&&(n="..."+n.substr(-10));var t=new Error("Decoded data is not valid UTF-8. Maybe try base32.decode.asBytes()? Partial data after reading "+e+" bytes: "+n+" <-");throw t.position=e,t},p=function(e){if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");for(var n,t,r,o,i,s,a,c,u=[],d=0,f=(e=e.replace(/=/g,"")).length,p=0,m=f>>3<<3;p<m;)n=l[e.charAt(p++)],t=l[e.charAt(p++)],r=l[e.charAt(p++)],o=l[e.charAt(p++)],i=l[e.charAt(p++)],s=l[e.charAt(p++)],a=l[e.charAt(p++)],c=l[e.charAt(p++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1),u[d++]=255&(i<<7|s<<2|a>>>3),u[d++]=255&(a<<5|c);var h=f-m;return 2===h?(n=l[e.charAt(p++)],t=l[e.charAt(p++)],u[d++]=255&(n<<3|t>>>2)):4===h?(n=l[e.charAt(p++)],t=l[e.charAt(p++)],r=l[e.charAt(p++)],o=l[e.charAt(p++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4)):5===h?(n=l[e.charAt(p++)],t=l[e.charAt(p++)],r=l[e.charAt(p++)],o=l[e.charAt(p++)],i=l[e.charAt(p++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1)):7===h&&(n=l[e.charAt(p++)],t=l[e.charAt(p++)],r=l[e.charAt(p++)],o=l[e.charAt(p++)],i=l[e.charAt(p++)],s=l[e.charAt(p++)],a=l[e.charAt(p++)],u[d++]=255&(n<<3|t>>>2),u[d++]=255&(t<<6|r<<1|o>>>4),u[d++]=255&(o<<4|i>>>1),u[d++]=255&(i<<7|s<<2|a>>>3)),u},m=function(e,n){if(!n)return function(e){for(var n,t,r="",o=e.length,i=0,s=0;i<o;)if((n=e[i++])<=127)r+=String.fromCharCode(n);else{n>191&&n<=223?(t=31&n,s=1):n<=239?(t=15&n,s=2):n<=247?(t=7&n,s=3):f(i,r);for(var a=0;a<s;++a)((n=e[i++])<128||n>191)&&f(i,r),t<<=6,t+=63&n;t>=55296&&t<=57343&&f(i,r),t>1114111&&f(i,r),t<=65535?r+=String.fromCharCode(t):(t-=65536,r+=String.fromCharCode(55296+(t>>10)),r+=String.fromCharCode(56320+(1023&t)))}return r}(p(e));if(!/^[A-Z2-7=]+$/.test(e))throw new Error("Invalid base32 characters");var t,r,o,i,s,a,c,u,d="",m=e.indexOf("=");-1===m&&(m=e.length);for(var h=0,g=m>>3<<3;h<g;)t=l[e.charAt(h++)],r=l[e.charAt(h++)],o=l[e.charAt(h++)],i=l[e.charAt(h++)],s=l[e.charAt(h++)],a=l[e.charAt(h++)],c=l[e.charAt(h++)],u=l[e.charAt(h++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|c>>>3))+String.fromCharCode(255&(c<<5|u));var w=m-g;return 2===w?(t=l[e.charAt(h++)],r=l[e.charAt(h++)],d+=String.fromCharCode(255&(t<<3|r>>>2))):4===w?(t=l[e.charAt(h++)],r=l[e.charAt(h++)],o=l[e.charAt(h++)],i=l[e.charAt(h++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))):5===w?(t=l[e.charAt(h++)],r=l[e.charAt(h++)],o=l[e.charAt(h++)],i=l[e.charAt(h++)],s=l[e.charAt(h++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|s>>>1))):7===w&&(t=l[e.charAt(h++)],r=l[e.charAt(h++)],o=l[e.charAt(h++)],i=l[e.charAt(h++)],s=l[e.charAt(h++)],a=l[e.charAt(h++)],c=l[e.charAt(h++)],d+=String.fromCharCode(255&(t<<3|r>>>2))+String.fromCharCode(255&(r<<6|o<<1|i>>>4))+String.fromCharCode(255&(i<<4|s>>>1))+String.fromCharCode(255&(s<<7|a<<2|c>>>3))),d},h={encode:function(e,n){var t="string"!=typeof e;return t&&e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),t?function(e){for(var n,t,r,o,i,s="",a=e.length,c=0,l=5*parseInt(a/5);c<l;)n=e[c++],t=e[c++],r=e[c++],o=e[c++],i=e[c++],s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[31&(o<<3|i>>>5)]+u[31&i];var d=a-l;return 1===d?(n=e[c],s+=u[n>>>3]+u[n<<2&31]+"======"):2===d?(n=e[c++],t=e[c],s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[t<<4&31]+"===="):3===d?(n=e[c++],t=e[c++],r=e[c],s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[r<<1&31]+"==="):4===d&&(n=e[c++],t=e[c++],r=e[c++],o=e[c],s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[o<<3&31]+"="),s}(e):n?function(e){for(var n,t,r,o,i,s="",a=e.length,c=0,l=5*parseInt(a/5);c<l;)n=e.charCodeAt(c++),t=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c++),i=e.charCodeAt(c++),s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[31&(o<<3|i>>>5)]+u[31&i];var d=a-l;return 1===d?(n=e.charCodeAt(c),s+=u[n>>>3]+u[n<<2&31]+"======"):2===d?(n=e.charCodeAt(c++),t=e.charCodeAt(c),s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[t<<4&31]+"===="):3===d?(n=e.charCodeAt(c++),t=e.charCodeAt(c++),r=e.charCodeAt(c),s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[r<<1&31]+"==="):4===d&&(n=e.charCodeAt(c++),t=e.charCodeAt(c++),r=e.charCodeAt(c++),o=e.charCodeAt(c),s+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[o<<3&31]+"="),s}(e):function(e){var n,t,r,o,i,s,a,c=!1,l="",f=0,p=0,m=e.length;do{for(d[0]=d[5],d[1]=d[6],d[2]=d[7],a=p;f<m&&a<5;++f)(s=e.charCodeAt(f))<128?d[a++]=s:s<2048?(d[a++]=192|s>>6,d[a++]=128|63&s):s<55296||s>=57344?(d[a++]=224|s>>12,d[a++]=128|s>>6&63,d[a++]=128|63&s):(s=65536+((1023&s)<<10|1023&e.charCodeAt(++f)),d[a++]=240|s>>18,d[a++]=128|s>>12&63,d[a++]=128|s>>6&63,d[a++]=128|63&s);p=a-5,f===m&&++f,f>m&&a<6&&(c=!0),n=d[0],a>4?(t=d[1],r=d[2],o=d[3],i=d[4],l+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[31&(o<<3|i>>>5)]+u[31&i]):1===a?l+=u[n>>>3]+u[n<<2&31]+"======":2===a?(t=d[1],l+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[t<<4&31]+"===="):3===a?(t=d[1],r=d[2],l+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[r<<1&31]+"==="):(t=d[1],r=d[2],o=d[3],l+=u[n>>>3]+u[31&(n<<2|t>>>6)]+u[t>>>1&31]+u[31&(t<<4|r>>>4)]+u[31&(r<<1|o>>>7)]+u[o>>>2&31]+u[o<<3&31]+"=")}while(!c);return l}(e)},decode:m};m.asBytes=p,a?r.exports=h:(s.base32=h,c&&void 0!==(o=function(){return h}.call(h,t,h,r))&&(r.exports=o))}()}).call(n,t("./node_modules/process/browser.js"),t("./node_modules/webpack/buildin/global.js"),t("./node_modules/webpack/buildin/module.js")(e))},"./node_modules/post-robot/src/bridge/bridge.js":function(e,n,t){"use strict";t("./node_modules/zalgo-promise/src/index.js");var r=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./node_modules/post-robot/src/conf/index.js"),i=t("./node_modules/post-robot/src/lib/index.js"),s=t("./node_modules/post-robot/src/global.js");function a(e){try{s.global.tunnelWindows[e]&&delete s.global.tunnelWindows[e].source}catch(e){}delete s.global.tunnelWindows[e]}s.global.tunnelWindows=s.global.tunnelWindows||{},s.global.tunnelWindowId=0,s.global.openTunnelToParent=function(e){var n=e.name,t=e.source,c=e.canary,u=e.sendMessage,l=(0,r.getParent)(window);if(!l)throw new Error("No parent window found to open tunnel to");var d=function(e){var n=e.name,t=e.source,o=e.canary,c=e.sendMessage;return function(){var e=s.global.tunnelWindows,n=Object.keys(e),t=Array.isArray(n),o=0;for(n=t?n:n[Symbol.iterator]();;){var c;if(t){if(o>=n.length)break;c=n[o++]}else{if((o=n.next()).done)break;c=o.value}var u=c,l=e[u];try{(0,i.noop)(l.source)}catch(e){a(u);continue}(0,r.isWindowClosed)(l.source)&&a(u)}}(),s.global.tunnelWindowId+=1,s.global.tunnelWindows[s.global.tunnelWindowId]={name:n,source:t,canary:o,sendMessage:c},s.global.tunnelWindowId}({name:n,source:t,canary:c,sendMessage:u});return s.global.send(l,o.CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL,{name:n,sendMessage:function(){var e=function(e){return s.global.tunnelWindows[e]}(d);try{(0,i.noop)(e&&e.source)}catch(e){return void a(d)}if(e&&e.source&&!(0,r.isWindowClosed)(e.source)){try{e.canary()}catch(e){return}e.sendMessage.apply(this,arguments)}}},{domain:o.CONSTANTS.WILDCARD})}},"./node_modules/post-robot/src/bridge/child.js":function(e,n,t){"use strict";n.__esModule=!0,n.openTunnelToOpener=function(){return r.ZalgoPromise.try(function(){var e=(0,o.getOpener)(window);if(e&&(0,c.needsBridge)({win:e}))return(0,c.registerRemoteWindow)(e),u(e).then(function(n){return n?window.name?n[i.CONSTANTS.WINDOW_PROPS.POSTROBOT].openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(e){try{(0,s.noop)(window)}catch(e){return}if(window&&!window.closed)try{a.global.receiveMessage({data:e,origin:this.origin,source:this.source})}catch(e){r.ZalgoPromise.reject(e)}}}).then(function(n){var t=n.source,r=n.origin,o=n.data;if(t!==e)throw new Error("Source does not match opener");(0,c.registerRemoteSendMessage)(t,r,o.sendMessage)}).catch(function(n){throw(0,c.rejectRemoteSendMessage)(e,n),n}):(0,c.rejectRemoteSendMessage)(e,new Error("Can not register with opener: window does not have a name")):(0,c.rejectRemoteSendMessage)(e,new Error("Can not register with opener: no bridge found in opener"))})})};var r=t("./node_modules/zalgo-promise/src/index.js"),o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/post-robot/src/conf/index.js"),s=t("./node_modules/post-robot/src/lib/index.js"),a=t("./node_modules/post-robot/src/global.js"),c=t("./node_modules/post-robot/src/bridge/common.js"),u=(0,s.weakMapMemoize)(function(e){return r.ZalgoPromise.try(function(){var n=(0,o.getFrames)(e),t=Array.isArray(n),s=0;for(n=t?n:n[Symbol.iterator]();;){var a;if(t){if(s>=n.length)break;a=n[s++]}else{if((s=n.next()).done)break;a=s.value}var u=a;try{if(u&&u!==window&&(0,o.isSameDomain)(u)&&u[i.CONSTANTS.WINDOW_PROPS.POSTROBOT])return u}catch(e){continue}}try{var l=(0,o.getFrameByName)(e,(0,c.getBridgeName)((0,o.getDomain)()));if(!l)return;return(0,o.isSameDomain)(l)&&l[i.CONSTANTS.WINDOW_PROPS.POSTROBOT]?l:new r.ZalgoPromise(function(e){var n=void 0,t=void 0;n=setInterval(function(){if(l&&(0,o.isSameDomain)(l)&&l[i.CONSTANTS.WINDOW_PROPS.POSTROBOT])return clearInterval(n),clearTimeout(t),e(l)},100),t=setTimeout(function(){return clearInterval(n),e()},2e3)})}catch(e){}})})},"./node_modules/post-robot/src/bridge/common.js":function(e,n,t){"use strict";n.__esModule=!0,n.documentBodyReady=void 0,n.needsBridgeForBrowser=c,n.needsBridgeForWin=u,n.needsBridgeForDomain=l,n.needsBridge=function(e){var n=e.win,t=e.domain;return!!c()&&(!(t&&!l(t,n))&&!(n&&!u(n)))},n.getBridgeName=d,n.isBridge=function(){return Boolean(window.name&&window.name===d((0,i.getDomain)()))},n.registerRemoteWindow=function(e){a.global.remoteWindows.set(e,{sendMessagePromise:new o.ZalgoPromise})},n.findRemoteWindow=f,n.registerRemoteSendMessage=function(e,n,t){var r=f(e);if(!r)throw new Error("Window not found to register sendMessage to");var s=function(r,o,s){if(r!==e)throw new Error("Remote window does not match window");if(!(0,i.matchDomain)(s,n))throw new Error("Remote domain "+s+" does not match domain "+n);t(o)};r.sendMessagePromise.resolve(s),r.sendMessagePromise=o.ZalgoPromise.resolve(s)},n.rejectRemoteSendMessage=function(e,n){var t=f(e);if(!t)throw new Error("Window not found on which to reject sendMessage");t.sendMessagePromise.asyncReject(n)},n.sendBridgeMessage=function(e,n,t){var r=(0,i.isOpener)(window,e),o=(0,i.isOpener)(e,window);if(!r&&!o)throw new Error("Can only send messages to and from parent and popup windows");var s=f(e);if(!s)throw new Error("Window not found to send message to");return s.sendMessagePromise.then(function(r){return r(e,n,t)})};var r=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js"),a=t("./node_modules/post-robot/src/global.js");function c(){return!!(0,i.getUserAgent)(window).match(/MSIE|trident|edge\/12|edge\/13/i)||!s.CONFIG.ALLOW_POSTMESSAGE_POPUP}function u(e){return!(0,i.isSameTopWindow)(window,e)}function l(e,n){if(e){if((0,i.getDomain)()!==(0,i.getDomainFromUrl)(e))return!0}else if(n&&!(0,i.isSameDomain)(n))return!0;return!1}function d(e){var n=(e=e||(0,i.getDomainFromUrl)(e)).replace(/[^a-zA-Z0-9]+/g,"_");return s.CONSTANTS.BRIDGE_NAME_PREFIX+"_"+n}function f(e){return a.global.remoteWindows.get(e)}n.documentBodyReady=new o.ZalgoPromise(function(e){if(window.document&&window.document.body)return e(window.document.body);var n=setInterval(function(){if(window.document&&window.document.body)return clearInterval(n),e(window.document.body)},10)}),a.global.remoteWindows=a.global.remoteWindows||new r.WeakMap},"./node_modules/post-robot/src/bridge/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/bridge/child.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/bridge/common.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./node_modules/post-robot/src/bridge/parent.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})}),t("./node_modules/post-robot/src/bridge/bridge.js")},"./node_modules/post-robot/src/bridge/interface.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/bridge/index.js");Object.defineProperty(n,"openBridge",{enumerable:!0,get:function(){return r.openBridge}}),Object.defineProperty(n,"linkUrl",{enumerable:!0,get:function(){return r.linkUrl}}),Object.defineProperty(n,"isBridge",{enumerable:!0,get:function(){return r.isBridge}}),Object.defineProperty(n,"needsBridge",{enumerable:!0,get:function(){return r.needsBridge}}),Object.defineProperty(n,"needsBridgeForBrowser",{enumerable:!0,get:function(){return r.needsBridgeForBrowser}}),Object.defineProperty(n,"hasBridge",{enumerable:!0,get:function(){return r.hasBridge}}),Object.defineProperty(n,"needsBridgeForWin",{enumerable:!0,get:function(){return r.needsBridgeForWin}}),Object.defineProperty(n,"needsBridgeForDomain",{enumerable:!0,get:function(){return r.needsBridgeForDomain}}),Object.defineProperty(n,"openTunnelToOpener",{enumerable:!0,get:function(){return r.openTunnelToOpener}}),Object.defineProperty(n,"destroyBridges",{enumerable:!0,get:function(){return r.destroyBridges}})},"./node_modules/post-robot/src/bridge/parent.js":function(e,n,t){"use strict";n.__esModule=!0,n.hasBridge=function(e,n){return n=n||(0,i.getDomainFromUrl)(e),Boolean(c.global.bridges[n])},n.openBridge=function(e,n){return n=n||(0,i.getDomainFromUrl)(e),c.global.bridges[n]?c.global.bridges[n]:(c.global.bridges[n]=o.ZalgoPromise.try(function(){if((0,i.getDomain)()===n)throw new Error("Can not open bridge on the same domain as current domain: "+n);var t=(0,u.getBridgeName)(n);if((0,i.getFrameByName)(window,t))throw new Error("Frame with name "+t+" already exists on page");var r=function(e,n){a.log.debug("Opening bridge:",e,n);var t=document.createElement("iframe");return t.setAttribute("name",e),t.setAttribute("id",e),t.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),t.setAttribute("frameborder","0"),t.setAttribute("border","0"),t.setAttribute("scrolling","no"),t.setAttribute("allowTransparency","true"),t.setAttribute("tabindex","-1"),t.setAttribute("hidden","true"),t.setAttribute("title",""),t.setAttribute("role","presentation"),t.src=n,t}(t,e);return c.global.bridgeFrames[n]=r,u.documentBodyReady.then(function(t){t.appendChild(r);var i=r.contentWindow;return function(e,n){c.global.on(s.CONSTANTS.POST_MESSAGE_NAMES.OPEN_TUNNEL,{window:e,domain:n},function(e){var t=e.origin,r=e.data;if(t!==n)throw new Error("Domain "+n+" does not match origin "+t);if(!r.name)throw new Error("Register window expected to be passed window name");if(!r.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!c.global.popupWindowsByName[r.name])throw new Error("Window with name "+r.name+" does not exist, or was not opened by this window");if(!c.global.popupWindowsByName[r.name].domain)throw new Error("We do not have a registered domain for window "+r.name);if(c.global.popupWindowsByName[r.name].domain!==t)throw new Error("Message origin "+t+" does not matched registered window origin "+c.global.popupWindowsByName[r.name].domain);return(0,u.registerRemoteSendMessage)(c.global.popupWindowsByName[r.name].win,n,r.sendMessage),{sendMessage:function(e){if(window&&!window.closed){var n=c.global.popupWindowsByName[r.name];if(n)try{c.global.receiveMessage({data:e,origin:n.domain,source:n.win})}catch(e){o.ZalgoPromise.reject(e)}}}}})}(i,n),new o.ZalgoPromise(function(e,n){r.onload=e,r.onerror=n}).then(function(){return(0,a.onChildWindowReady)(i,s.CONFIG.BRIDGE_TIMEOUT,"Bridge "+e)}).then(function(){return i})})}),c.global.bridges[n])},n.linkUrl=function(e,n){var t=c.global.popupWindowsByWin.get(e);t&&(t.domain=(0,i.getDomainFromUrl)(n),(0,u.registerRemoteWindow)(e))},n.destroyBridges=function(){var e=Object.keys(c.global.bridgeFrames),n=Array.isArray(e),t=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(t>=e.length)break;r=e[t++]}else{if((t=e.next()).done)break;r=t.value}var o=r,i=c.global.bridgeFrames[o];i.parentNode&&i.parentNode.removeChild(i)}c.global.bridgeFrames={},c.global.bridges={}};var r=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js"),a=t("./node_modules/post-robot/src/lib/index.js"),c=t("./node_modules/post-robot/src/global.js"),u=t("./node_modules/post-robot/src/bridge/common.js");c.global.bridges=c.global.bridges||{},c.global.bridgeFrames=c.global.bridgeFrames||{},c.global.popupWindowsByWin=c.global.popupWindowsByWin||new r.WeakMap,c.global.popupWindowsByName=c.global.popupWindowsByName||{};var l=window.open;window.open=function(e,n,t,r){var o=e;if(e&&0===e.indexOf(s.CONSTANTS.MOCK_PROTOCOL)){var a=e.split("|");o=a[0],e=a[1]}o&&(o=(0,i.getDomainFromUrl)(o));var d=l.call(this,e,n,t,r);if(!d)return d;e&&(0,u.registerRemoteWindow)(d);var f=Object.keys(c.global.popupWindowsByName),p=Array.isArray(f),m=0;for(f=p?f:f[Symbol.iterator]();;){var h;if(p){if(m>=f.length)break;h=f[m++]}else{if((m=f.next()).done)break;h=m.value}var g=h;(0,i.isWindowClosed)(c.global.popupWindowsByName[g].win)&&delete c.global.popupWindowsByName[g]}if(n&&d){var w=c.global.popupWindowsByWin.get(d)||c.global.popupWindowsByName[n]||{};w.name=w.name||n,w.win=w.win||d,w.domain=w.domain||o,c.global.popupWindowsByWin.set(d,w),c.global.popupWindowsByName[n]=w}return d}},"./node_modules/post-robot/src/clean.js":function(e,n,t){"use strict";n.__esModule=!0,n.cleanUpWindow=function(e){var n=r.global.requestPromises.get(e);if(n){var t=n,o=Array.isArray(t),i=0;for(t=o?t:t[Symbol.iterator]();;){var s;if(o){if(i>=t.length)break;s=t[i++]}else{if((i=t.next()).done)break;s=i.value}s.reject(new Error("No response from window - cleaned up"))}}r.global.popupWindowsByWin&&r.global.popupWindowsByWin.delete(e),r.global.remoteWindows&&r.global.remoteWindows.delete(e),r.global.requestPromises.delete(e),r.global.methods.delete(e),r.global.readyPromises.delete(e)},t("./node_modules/cross-domain-utils/src/index.js");var r=t("./node_modules/post-robot/src/global.js")},"./node_modules/post-robot/src/compat/ie.js":function(e,n,t){"use strict";n.__esModule=!0,n.emulateIERestrictions=function(e,n){if(!o.CONFIG.ALLOW_POSTMESSAGE_POPUP&&!1===(0,r.isSameTopWindow)(e,n))throw new Error("Can not send and receive post messages between two different windows (disabled to emulate IE)")};var r=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./node_modules/post-robot/src/conf/index.js")},"./node_modules/post-robot/src/compat/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/compat/ie.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})})},"./node_modules/post-robot/src/conf/config.js":function(e,n,t){"use strict";n.__esModule=!0,n.CONFIG=void 0;var r,o=t("./node_modules/post-robot/src/conf/constants.js"),i=n.CONFIG={ALLOW_POSTMESSAGE_POPUP:!("__ALLOW_POSTMESSAGE_POPUP__"in window)||window.__ALLOW_POSTMESSAGE_POPUP__,LOG_LEVEL:"info",BRIDGE_TIMEOUT:5e3,CHILD_WINDOW_TIMEOUT:5e3,ACK_TIMEOUT:-1!==window.navigator.userAgent.match(/MSIE/i)?2e3:1e3,RES_TIMEOUT:-1,LOG_TO_PAGE:!1,ALLOWED_POST_MESSAGE_METHODS:(r={},r[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=!0,r[o.CONSTANTS.SEND_STRATEGIES.BRIDGE]=!0,r[o.CONSTANTS.SEND_STRATEGIES.GLOBAL]=!0,r),ALLOW_SAME_ORIGIN:!1};0===window.location.href.indexOf(o.CONSTANTS.FILE_PROTOCOL)&&(i.ALLOW_POSTMESSAGE_POPUP=!0)},"./node_modules/post-robot/src/conf/constants.js":function(e,n,t){"use strict";n.__esModule=!0,n.CONSTANTS={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",HELLO:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise",REGEX:"regex"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"};var r=n.POST_MESSAGE_NAMES={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"};n.POST_MESSAGE_NAMES_LIST=Object.keys(r).map(function(e){return r[e]})},"./node_modules/post-robot/src/conf/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/conf/config.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/conf/constants.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},"./node_modules/post-robot/src/drivers/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/drivers/receive/index.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/drivers/send/index.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./node_modules/post-robot/src/drivers/listeners.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})},"./node_modules/post-robot/src/drivers/listeners.js":function(e,n,t){"use strict";n.__esModule=!0,n.resetListeners=function(){i.global.responseListeners={},i.global.requestListeners={}},n.addResponseListener=function(e,n){i.global.responseListeners[e]=n},n.getResponseListener=function(e){return i.global.responseListeners[e]},n.deleteResponseListener=function(e){delete i.global.responseListeners[e]},n.markResponseListenerErrored=function(e){i.global.erroredResponseListeners[e]=!0},n.isResponseListenerErrored=function(e){return Boolean(i.global.erroredResponseListeners[e])},n.getRequestListener=u,n.addRequestListener=function e(n,t){var o=n.name,l=n.win,d=n.domain;if(!o||"string"!=typeof o)throw new Error("Name required to add request listener");if(Array.isArray(l)){var f=[],p=l,m=Array.isArray(p),h=0;for(p=m?p:p[Symbol.iterator]();;){var g;if(m){if(h>=p.length)break;g=p[h++]}else{if((h=p.next()).done)break;g=h.value}var w=g;f.push(e({name:o,domain:d,win:w},t))}return{cancel:function(){var e=f,n=Array.isArray(e),t=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(t>=e.length)break;r=e[t++]}else{if((t=e.next()).done)break;r=t.value}r.cancel()}}}}if(Array.isArray(d)){var y=[],v=d,b=Array.isArray(v),E=0;for(v=b?v:v[Symbol.iterator]();;){var _;if(b){if(E>=v.length)break;_=v[E++]}else{if((E=v.next()).done)break;_=E.value}var S=_;y.push(e({name:o,win:l,domain:S},t))}return{cancel:function(){var e=y,n=Array.isArray(e),t=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(t>=e.length)break;r=e[t++]}else{if((t=e.next()).done)break;r=t.value}r.cancel()}}}}var O=u({name:o,win:l,domain:d});if(l&&l!==a.CONSTANTS.WILDCARD||(l=i.global.WINDOW_WILDCARD),d=d||a.CONSTANTS.WILDCARD,O)throw l&&d?new Error("Request listener already exists for "+o+" on domain "+d.toString()+" for "+(l===i.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):l?new Error("Request listener already exists for "+o+" for "+(l===i.global.WINDOW_WILDCARD?"wildcard":"specified")+" window"):d?new Error("Request listener already exists for "+o+" on domain "+d.toString()):new Error("Request listener already exists for "+o);var T=i.global.requestListeners,P=T[o];P||(P=new r.WeakMap,T[o]=P);var A=P.get(l);A||(A={},P.set(l,A));var C=d.toString(),j=A[c],x=void 0;return(0,s.isRegex)(d)?(j||(j=[],A[c]=j),x={regex:d,listener:t},j.push(x)):A[C]=t,{cancel:function(){A&&(delete A[C],l&&0===Object.keys(A).length&&P.delete(l),x&&j.splice(j.indexOf(x,1)))}}},t("./node_modules/zalgo-promise/src/index.js");var r=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/post-robot/src/global.js"),s=t("./node_modules/post-robot/src/lib/index.js"),a=t("./node_modules/post-robot/src/conf/index.js");i.global.responseListeners=i.global.responseListeners||{},i.global.requestListeners=i.global.requestListeners||{},i.global.WINDOW_WILDCARD=i.global.WINDOW_WILDCARD||new function(){},i.global.erroredResponseListeners=i.global.erroredResponseListeners||{};var c="__domain_regex__";function u(e){var n=e.name,t=e.win,r=e.domain;if(t===a.CONSTANTS.WILDCARD&&(t=null),r===a.CONSTANTS.WILDCARD&&(r=null),!n)throw new Error("Name required to get request listener");var s=i.global.requestListeners[n];if(s)for(var u=[t,i.global.WINDOW_WILDCARD],l=0;l<u.length;l++){var d=u[l],f=d&&s.get(d);if(f){if(r&&"string"==typeof r){if(f[r])return f[r];if(f[c]){var p=f[c],m=Array.isArray(p),h=0;for(p=m?p:p[Symbol.iterator]();;){var g;if(m){if(h>=p.length)break;g=p[h++]}else{if((h=p.next()).done)break;g=h.value}var w=g,y=w.regex,v=w.listener;if((0,o.matchDomain)(y,r))return v}}}if(f[a.CONSTANTS.WILDCARD])return f[a.CONSTANTS.WILDCARD]}}}},"./node_modules/post-robot/src/drivers/receive/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.receiveMessage=u,n.messageListener=l,n.listenForMessages=function(){(0,s.addEventListener)(window,"message",l)};var o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/post-robot/src/conf/index.js"),s=t("./node_modules/post-robot/src/lib/index.js"),a=t("./node_modules/post-robot/src/global.js"),c=t("./node_modules/post-robot/src/drivers/receive/types.js");function u(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var n=e.source,t=e.origin,u=function(e){var n=void 0;try{n=(0,s.jsonParse)(e)}catch(e){return}if(n&&"object"===(void 0===n?"undefined":r(n))&&null!==n&&(n=n[i.CONSTANTS.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===n?"undefined":r(n))&&null!==n&&n.type&&"string"==typeof n.type&&c.RECEIVE_MESSAGE_TYPES[n.type])return n}(e.data);if(u){if(!u.sourceDomain||"string"!=typeof u.sourceDomain)throw new Error("Expected message to have sourceDomain");if(0!==u.sourceDomain.indexOf(i.CONSTANTS.MOCK_PROTOCOL)&&0!==u.sourceDomain.indexOf(i.CONSTANTS.FILE_PROTOCOL)||(t=u.sourceDomain),-1===a.global.receivedMessages.indexOf(u.id)){a.global.receivedMessages.push(u.id);var l;l=-1!==i.POST_MESSAGE_NAMES_LIST.indexOf(u.name)||u.type===i.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===u.ack?"error":"info",s.log.logLevel(l,["\n\n\t","#receive",u.type.replace(/^postrobot_message_/,""),"::",u.name,"::",t,"\n\n",u]),!(0,o.isWindowClosed)(n)||u.fireAndForget?(u.data&&(u.data=(0,s.deserializeMethods)(n,t,u.data)),c.RECEIVE_MESSAGE_TYPES[u.type](n,t,u)):s.log.debug("Source window is closed - can not send "+u.type+" "+u.name)}}}function l(e){try{(0,s.noop)(e.source)}catch(e){return}var n={source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data};try{t("./node_modules/post-robot/src/compat/index.js").emulateIERestrictions(n.source,window)}catch(e){return}u(n)}a.global.receivedMessages=a.global.receivedMessages||[],a.global.receiveMessage=u},"./node_modules/post-robot/src/drivers/receive/types.js":function(e,n,t){"use strict";n.__esModule=!0,n.RECEIVE_MESSAGE_TYPES=void 0;var r,o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./node_modules/post-robot/src/conf/index.js"),c=t("./node_modules/post-robot/src/lib/index.js"),u=t("./node_modules/post-robot/src/drivers/send/index.js"),l=t("./node_modules/post-robot/src/drivers/listeners.js");n.RECEIVE_MESSAGE_TYPES=((r={})[a.CONSTANTS.POST_MESSAGE_TYPE.ACK]=function(e,n,t){if(!(0,l.isResponseListenerErrored)(t.hash)){var r=(0,l.getResponseListener)(t.hash);if(!r)throw new Error("No handler found for post message ack for message: "+t.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(r.domain,n))throw new Error("Ack origin "+n+" does not match domain "+r.domain.toString());r.ack=!0}},r[a.CONSTANTS.POST_MESSAGE_TYPE.REQUEST]=function(e,n,t){var r=(0,l.getRequestListener)({name:t.name,win:e,domain:n});function d(r){return t.fireAndForget||(0,s.isWindowClosed)(e)?i.ZalgoPromise.resolve():(0,u.sendMessage)(e,o({target:t.originalSource,hash:t.hash,name:t.name},r),n)}return i.ZalgoPromise.all([d({type:a.CONSTANTS.POST_MESSAGE_TYPE.ACK}),i.ZalgoPromise.try(function(){if(!r)throw new Error("No handler found for post message: "+t.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(r.domain,n))throw new Error("Request origin "+n+" does not match domain "+r.domain.toString());var o=t.data;return r.handler({source:e,origin:n,data:o})}).then(function(e){return d({type:a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:a.CONSTANTS.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var n=(0,c.stringifyError)(e).replace(/^Error: /,""),t=e.code;return d({type:a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE,ack:a.CONSTANTS.POST_MESSAGE_ACK.ERROR,error:n,code:t})})]).then(c.noop).catch(function(e){if(r&&r.handleError)return r.handleError(e);c.log.error((0,c.stringifyError)(e))})},r[a.CONSTANTS.POST_MESSAGE_TYPE.RESPONSE]=function(e,n,t){if(!(0,l.isResponseListenerErrored)(t.hash)){var r=(0,l.getResponseListener)(t.hash);if(!r)throw new Error("No handler found for post message response for message: "+t.name+" from "+n+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!(0,s.matchDomain)(r.domain,n))throw new Error("Response origin "+n+" does not match domain "+(0,s.stringifyDomainPattern)(r.domain));if((0,l.deleteResponseListener)(t.hash),t.ack===a.CONSTANTS.POST_MESSAGE_ACK.ERROR){var o=new Error(t.error);return t.code&&(o.code=t.code),r.respond(o,null)}if(t.ack===a.CONSTANTS.POST_MESSAGE_ACK.SUCCESS){var i=t.data||t.response;return r.respond(null,{source:e,origin:n,data:i})}}},r)},"./node_modules/post-robot/src/drivers/send/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};n.sendMessage=function(e,n,t){return i.ZalgoPromise.try(function(){var u;n=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,a.uniqueID)(),s=(0,a.getWindowType)(),c=(0,o.getDomain)(window);return r({},n,t,{sourceDomain:c,id:n.id||i,windowType:s})}(e,n,{data:(0,a.serializeMethods)(e,t,n.data),domain:t});var l;if(l=-1!==s.POST_MESSAGE_NAMES_LIST.indexOf(n.name)||n.type===s.CONSTANTS.POST_MESSAGE_TYPE.ACK?"debug":"error"===n.ack?"error":"info",a.log.logLevel(l,["\n\n\t","#send",n.type.replace(/^postrobot_message_/,""),"::",n.name,"::",t||s.CONSTANTS.WILDCARD,"\n\n",n]),e===window&&!s.CONFIG.ALLOW_SAME_ORIGIN)throw new Error("Attemping to send message to self");if((0,o.isWindowClosed)(e))throw new Error("Window is closed");a.log.debug("Running send message strategies",n);var d=[],f=(0,a.jsonStringify)(((u={})[s.CONSTANTS.WINDOW_PROPS.POSTROBOT]=n,u),null,2);return i.ZalgoPromise.map(Object.keys(c.SEND_MESSAGE_STRATEGIES),function(n){return i.ZalgoPromise.try(function(){if(!s.CONFIG.ALLOWED_POST_MESSAGE_METHODS[n])throw new Error("Strategy disallowed: "+n);return c.SEND_MESSAGE_STRATEGIES[n](e,f,t)}).then(function(){return d.push(n+": success"),!0},function(e){return d.push(n+": "+(0,a.stringifyError)(e)+"\n"),!1})}).then(function(e){var t=e.some(Boolean),r=n.type+" "+n.name+" "+(t?"success":"error")+":\n  - "+d.join("\n  - ")+"\n";if(a.log.debug(r),!t)throw new Error(r)})})};var o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js"),a=t("./node_modules/post-robot/src/lib/index.js"),c=t("./node_modules/post-robot/src/drivers/send/strategies.js")},"./node_modules/post-robot/src/drivers/send/strategies.js":function(e,n,t){"use strict";n.__esModule=!0,n.SEND_MESSAGE_STRATEGIES=void 0;var r=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./node_modules/post-robot/src/conf/index.js"),i=n.SEND_MESSAGE_STRATEGIES={};i[o.CONSTANTS.SEND_STRATEGIES.POST_MESSAGE]=function(e,n,i){try{t("./node_modules/post-robot/src/compat/index.js").emulateIERestrictions(window,e)}catch(e){return}(Array.isArray(i)?i:"string"==typeof i?[i]:[o.CONSTANTS.WILDCARD]).map(function(n){if(0===n.indexOf(o.CONSTANTS.MOCK_PROTOCOL)){if(window.location.protocol===o.CONSTANTS.FILE_PROTOCOL)return o.CONSTANTS.WILDCARD;if(!(0,r.isActuallySameDomain)(e))throw new Error("Attempting to send messsage to mock domain "+n+", but window is actually cross-domain");return(0,r.getActualDomain)(e)}return 0===n.indexOf(o.CONSTANTS.FILE_PROTOCOL)?o.CONSTANTS.WILDCARD:n}).forEach(function(t){return e.postMessage(n,t)})};var s=t("./node_modules/post-robot/src/bridge/index.js"),a=s.sendBridgeMessage,c=s.needsBridgeForBrowser,u=s.isBridge;i[o.CONSTANTS.SEND_STRATEGIES.BRIDGE]=function(e,n,t){if(c()||u()){if((0,r.isSameDomain)(e))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==(0,r.isSameTopWindow)(window,e))throw new Error("Can only use bridge to communicate between two different windows, not between frames");return a(e,n,t)}},i[o.CONSTANTS.SEND_STRATEGIES.GLOBAL]=function(e,n){if(c()){if(!(0,r.isSameDomain)(e))throw new Error("Post message through global disabled between different domain windows");if(!1!==(0,r.isSameTopWindow)(window,e))throw new Error("Can only use global to communicate between two different windows, not between frames");var t=e[o.CONSTANTS.WINDOW_PROPS.POSTROBOT];if(!t)throw new Error("Can not find postRobot global on foreign window");return t.receiveMessage({source:window,origin:(0,r.getDomain)(),data:n})}}},"./node_modules/post-robot/src/global.js":function(e,n,t){"use strict";n.__esModule=!0,n.global=void 0;var r=t("./node_modules/post-robot/src/conf/index.js");(n.global=window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT]=window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT]||{}).registerSelf=function(){}},"./node_modules/post-robot/src/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(r);n.default=o},"./node_modules/post-robot/src/interface.js":function(e,n,t){"use strict";n.__esModule=!0,n.bridge=n.Promise=n.cleanUpWindow=void 0;var r=t("./node_modules/post-robot/src/public/index.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/clean.js");Object.defineProperty(n,"cleanUpWindow",{enumerable:!0,get:function(){return o.cleanUpWindow}});var i=t("./node_modules/zalgo-promise/src/index.js");Object.defineProperty(n,"Promise",{enumerable:!0,get:function(){return i.ZalgoPromise}}),n.init=u;var s=t("./node_modules/post-robot/src/lib/index.js"),a=t("./node_modules/post-robot/src/drivers/index.js"),c=t("./node_modules/post-robot/src/global.js");function u(){c.global.initialized||((0,a.listenForMessages)(),t("./node_modules/post-robot/src/bridge/index.js").openTunnelToOpener(),(0,s.initOnReady)(),(0,s.listenForMethods)({on:r.on,send:r.send})),c.global.initialized=!0}n.bridge=t("./node_modules/post-robot/src/bridge/interface.js"),u()},"./node_modules/post-robot/src/lib/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/post-robot/src/lib/util.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/lib/log.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./node_modules/post-robot/src/lib/serialize.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./node_modules/post-robot/src/lib/ready.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})})},"./node_modules/post-robot/src/lib/log.js":function(e,n,t){"use strict";n.__esModule=!0,n.log=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=t("./node_modules/post-robot/src/conf/index.js"),i=t("./node_modules/post-robot/src/lib/util.js"),s=["debug","info","warn","error"];Function.prototype.bind&&window.console&&"object"===r(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var a=n.log={clearLogs:function(){if(window.console&&window.console.clear&&window.console.clear(),o.CONFIG.LOG_TO_PAGE){var e=document.getElementById("postRobotLogs");e&&e.parentNode&&e.parentNode.removeChild(e)}},writeToPage:function(e,n){setTimeout(function(){var t=document.getElementById("postRobotLogs");t||((t=document.createElement("div")).id="postRobotLogs",t.style.cssText="width: 800px; font-family: monospace; white-space: pre-wrap;",document.body&&document.body.appendChild(t));var r=document.createElement("div"),o=(new Date).toString().split(" ")[4],s=Array.prototype.slice.call(n).map(function(e){if("string"==typeof e)return e;if(!e)return Object.prototype.toString.call(e);var n=void 0;try{n=(0,i.jsonStringify)(e,null,2)}catch(e){n="[object]"}return"\n\n"+n+"\n\n"}).join(" "),a=o+" "+e+" "+s;r.innerHTML=a;var c={log:"#ddd",warn:"orange",error:"red",info:"blue",debug:"#aaa"}[e];r.style.cssText="margin-top: 10px; color: "+c+";",t.childNodes.length?t.insertBefore(r,t.childNodes[0]):t.appendChild(r)})},logLevel:function(e,n){setTimeout(function(){try{var t=window.LOG_LEVEL||o.CONFIG.LOG_LEVEL;if("disabled"===t||s.indexOf(e)<s.indexOf(t))return;if((n=Array.prototype.slice.call(n)).unshift(""+window.location.host+window.location.pathname),n.unshift("::"),n.unshift(""+(0,i.getWindowType)().toLowerCase()),n.unshift("[post-robot]"),o.CONFIG.LOG_TO_PAGE&&a.writeToPage(e,n),!window.console)return;if(window.console[e]||(e="log"),!window.console[e])return;window.console[e].apply(window.console,n)}catch(e){}},1)},debug:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.logLevel("debug",n)},info:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.logLevel("info",n)},warn:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.logLevel("warn",n)},error:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];a.logLevel("error",n)}}},"./node_modules/post-robot/src/lib/ready.js":function(e,n,t){"use strict";n.__esModule=!0,n.onHello=l,n.sayHello=d,n.initOnReady=function(){l(function(e){var n=e.source,t=e.origin,r=a.global.readyPromises.get(n)||new i.ZalgoPromise;r.resolve({origin:t}),a.global.readyPromises.set(n,r)});var e=(0,o.getAncestor)();e&&d(e).catch(function(e){c.log.debug((0,u.stringifyError)(e))})},n.onChildWindowReady=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",r=a.global.readyPromises.get(e);return r||(r=new i.ZalgoPromise,a.global.readyPromises.set(e,r),-1!==n&&setTimeout(function(){return r.reject(new Error(t+" did not load after "+n+"ms"))},n),r)};var r=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js"),a=t("./node_modules/post-robot/src/global.js"),c=t("./node_modules/post-robot/src/lib/log.js"),u=t("./node_modules/post-robot/src/lib/util.js");function l(e){a.global.on(s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{domain:s.CONSTANTS.WILDCARD},function(n){var t=n.source,r=n.origin;return e({source:t,origin:r})})}function d(e){return a.global.send(e,s.CONSTANTS.POST_MESSAGE_NAMES.HELLO,{},{domain:s.CONSTANTS.WILDCARD,timeout:-1}).then(function(e){return{origin:e.origin}})}a.global.readyPromises=a.global.readyPromises||new r.WeakMap},"./node_modules/post-robot/src/lib/serialize.js":function(e,n,t){"use strict";n.__esModule=!0,n.listenForMethods=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.serializeMethod=f,n.serializeMethods=function(e,n,t){return(0,u.replaceObject)({obj:t},function(t,r){return"function"==typeof t?f(e,n,t,r.toString()):t instanceof Error?(o=t,{__type__:a.CONSTANTS.SERIALIZATION_TYPES.ERROR,__message__:(0,u.stringifyError)(o),__code__:o.code}):window.Promise&&t instanceof window.Promise?function(e,n,t,r){return{__type__:a.CONSTANTS.SERIALIZATION_TYPES.PROMISE,__then__:f(e,n,function(e,n){return t.then(e,n)},r+".then")}}(e,n,t,r.toString()):s.ZalgoPromise.isPromise(t)?function(e,n,t,r){return{__type__:a.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:f(e,n,function(e,n){return t.then(e,n)},r+".then")}}(e,n,t,r.toString()):(0,u.isRegex)(t)?(i=t,{__type__:a.CONSTANTS.SERIALIZATION_TYPES.REGEX,__source__:i.source}):void 0;var o,i}).obj},n.deserializeMethod=p,n.deserializeError=m,n.deserializeZalgoPromise=h,n.deserializePromise=g,n.deserializeRegex=w,n.deserializeMethods=function(e,n,t){return(0,u.replaceObject)({obj:t},function(t){if("object"===(void 0===t?"undefined":r(t))&&null!==t)return d(t,a.CONSTANTS.SERIALIZATION_TYPES.METHOD)?p(e,n,t):d(t,a.CONSTANTS.SERIALIZATION_TYPES.ERROR)?m(e,n,t):d(t,a.CONSTANTS.SERIALIZATION_TYPES.PROMISE)?g(e,n,t):d(t,a.CONSTANTS.SERIALIZATION_TYPES.ZALGO_PROMISE)?h(e,n,t):d(t,a.CONSTANTS.SERIALIZATION_TYPES.REGEX)?w(e,n,t):void 0}).obj};var o=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/zalgo-promise/src/index.js"),a=t("./node_modules/post-robot/src/conf/index.js"),c=t("./node_modules/post-robot/src/global.js"),u=t("./node_modules/post-robot/src/lib/util.js"),l=t("./node_modules/post-robot/src/lib/log.js");function d(e,n){return"object"===(void 0===e?"undefined":r(e))&&null!==e&&e.__type__===n}function f(e,n,t,r){var o=(0,u.uniqueID)(),i=c.global.methods.get(e);return i||(i={},c.global.methods.set(e,i)),i[o]={domain:n,method:t},{__type__:a.CONSTANTS.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:r}}function p(e,n,t){function r(){var r=Array.prototype.slice.call(arguments);return l.log.debug("Call foreign method",t.__name__,r),c.global.send(e,a.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{id:t.__id__,name:t.__name__,args:r},{domain:n,timeout:-1}).then(function(e){var n=e.data;return l.log.debug("Got foreign method result",t.__name__,n.result),n.result},function(e){throw l.log.debug("Got foreign method error",(0,u.stringifyError)(e)),e})}return r.__name__=t.__name__,r.__xdomain__=!0,r.source=e,r.origin=n,r}function m(e,n,t){var r=new Error(t.__message__);return t.__code__&&(r.code=t.__code__),r}function h(e,n,t){return new s.ZalgoPromise(function(r,o){return p(e,n,t.__then__)(r,o)})}function g(e,n,t){return window.Promise?new window.Promise(function(r,o){return p(e,n,t.__then__)(r,o)}):h(e,n,t)}function w(e,n,t){return new RegExp(t.__source__)}c.global.methods=c.global.methods||new o.WeakMap,n.listenForMethods=(0,u.once)(function(){c.global.on(a.CONSTANTS.POST_MESSAGE_NAMES.METHOD,{origin:a.CONSTANTS.WILDCARD},function(e){var n=e.source,t=e.origin,r=e.data,o=c.global.methods.get(n);if(!o)throw new Error("Could not find any methods this window has privileges to call");var a=o[r.id];if(!a)throw new Error("Could not find method with id: "+r.id);if(!(0,i.matchDomain)(a.domain,t))throw new Error("Method domain "+a.domain+" does not match origin "+t);return l.log.debug("Call local method",r.name,r.args),s.ZalgoPromise.try(function(){return a.method.apply({source:n,origin:t,data:r},r.args)}).then(function(e){return{result:e,id:r.id,name:r.name}})})})},"./node_modules/post-robot/src/lib/util.js":function(e,n,t){"use strict";n.__esModule=!0,n.weakMapMemoize=n.once=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.stringifyError=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(t>=3)return"stringifyError stack overflow";try{if(!n)return"<unknown error: "+Object.prototype.toString.call(n)+">";if("string"==typeof n)return n;if(n instanceof Error){var r=n&&n.stack,o=n&&n.message;if(r&&o)return-1!==r.indexOf(o)?r:o+"\n"+r;if(r)return r;if(o)return o}return"function"==typeof n.toString?n.toString():Object.prototype.toString.call(n)}catch(n){return"Error while stringifying error: "+e(n,t+1)}},n.noop=function(){},n.addEventListener=function(e,n,t){return e.addEventListener?e.addEventListener(n,t):e.attachEvent("on"+n,t),{cancel:function(){e.removeEventListener?e.removeEventListener(n,t):e.detachEvent("on"+n,t)}}},n.uniqueID=function(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})},n.eachArray=a,n.eachObject=c,n.each=u,n.replaceObject=function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(o>=100)throw new Error("Self-referential object passed, or object contained too many layers");var i=void 0;if("object"!==(void 0===n?"undefined":r(n))||null===n||Array.isArray(n)){if(!Array.isArray(n))throw new TypeError("Invalid type: "+(void 0===n?"undefined":r(n)));i=[]}else i={};return u(n,function(n,s){var a=t(n,s);void 0!==a?i[s]=a:"object"===(void 0===n?"undefined":r(n))&&null!==n?i[s]=e(n,t,o+1):i[s]=n}),i},n.safeInterval=function(e,n){var t=void 0;return t=setTimeout(function r(){t=setTimeout(r,n),e.call()},n),{cancel:function(){clearTimeout(t)}}},n.isRegex=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},n.getWindowType=function(){return(0,i.isPopup)()?s.CONSTANTS.WINDOW_TYPES.POPUP:(0,i.isIframe)()?s.CONSTANTS.WINDOW_TYPES.IFRAME:s.CONSTANTS.WINDOW_TYPES.FULLPAGE},n.jsonStringify=function(e,n,t){var r=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(r=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,n,t);try{r&&(Object.prototype.toJSON=r),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i},n.jsonParse=function(e){return JSON.parse(e)};var o=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js");function a(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function c(e,n){for(var t in e)e.hasOwnProperty(t)&&n(e[t],t)}function u(e,n){Array.isArray(e)?a(e,n):"object"===(void 0===e?"undefined":r(e))&&null!==e&&c(e,n)}n.once=function(e){if(!e)return e;var n=!1;return function(){if(!n)return n=!0,e.apply(this,arguments)}},n.weakMapMemoize=function(e){var n=new o.WeakMap;return function(t){var r=n.get(t);return void 0!==r?r:(void 0!==(r=e.call(this,t))&&n.set(t,r),r)}}},"./node_modules/post-robot/src/public/client.js":function(e,n,t){"use strict";n.__esModule=!0,n.send=void 0,n.request=l,n.sendToParent=function(e,n,t){var r=(0,i.getAncestor)();return r?d(r,e,n,t):new o.ZalgoPromise(function(e,n){return n(new Error("Window does not have a parent"))})},n.client=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");var n=e.window;return{send:function(t,r){return d(n,t,r,e)}}};var r=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/post-robot/src/conf/index.js"),a=t("./node_modules/post-robot/src/drivers/index.js"),c=t("./node_modules/post-robot/src/lib/index.js"),u=t("./node_modules/post-robot/src/global.js");function l(e){return o.ZalgoPromise.try(function(){if(!e.name)throw new Error("Expected options.name");var n=e.name,t=void 0,r=void 0;if("string"==typeof e.window){var l=document.getElementById(e.window);if(!l)throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be a valid element id");if("iframe"!==l.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(!l.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");t=l.contentWindow}else if(e.window instanceof HTMLIFrameElement){if("iframe"!==e.window.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(e.window)+" to be an iframe");if(e.window&&!e.window.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");e.window&&e.window.contentWindow&&(t=e.window.contentWindow)}else t=e.window;if(!t)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");var d=t;r=e.domain||s.CONSTANTS.WILDCARD;var f=e.name+"_"+(0,c.uniqueID)();if((0,i.isWindowClosed)(d))throw new Error("Target window is closed");var p=!1,m=u.global.requestPromises.get(d);m||(m=[],u.global.requestPromises.set(d,m));var h=o.ZalgoPromise.try(function(){if((0,i.isAncestor)(window,d))return(0,c.onChildWindowReady)(d,e.timeout||s.CONFIG.CHILD_WINDOW_TIMEOUT)}).then(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,c.isRegex)(r)&&!e)return(0,c.sayHello)(d)}).then(function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).origin;if((0,c.isRegex)(r)){if(!(0,i.matchDomain)(r,t))throw new Error("Remote window domain "+t+" does not match regex: "+r.toString());r=t}if("string"!=typeof r&&!Array.isArray(r))throw new TypeError("Expected domain to be a string or array");var u=r;return new o.ZalgoPromise(function(t,r){var o=void 0;if(e.fireAndForget||(o={name:n,window:d,domain:u,respond:function(e,n){e||(p=!0,m.splice(m.indexOf(h,1))),e?r(e):t(n)}},(0,a.addResponseListener)(f,o)),(0,a.sendMessage)(d,{type:s.CONSTANTS.POST_MESSAGE_TYPE.REQUEST,hash:f,name:n,data:e.data,fireAndForget:e.fireAndForget},u).catch(r),e.fireAndForget)return t();var c=s.CONFIG.ACK_TIMEOUT,l=e.timeout||s.CONFIG.RES_TIMEOUT,g=100;setTimeout(function t(){if(!p){if((0,i.isWindowClosed)(d))return o.ack?r(new Error("Window closed for "+n+" before response")):r(new Error("Window closed for "+n+" before ack"));if(c=Math.max(c-g,0),-1!==l&&(l=Math.max(l-g,0)),o.ack){if(-1===l)return;g=Math.min(l,2e3)}else{if(0===c)return r(new Error("No ack for postMessage "+n+" in "+(0,i.getDomain)()+" in "+s.CONFIG.ACK_TIMEOUT+"ms"));if(0===l)return r(new Error("No response for postMessage "+n+" in "+(0,i.getDomain)()+" in "+(e.timeout||s.CONFIG.RES_TIMEOUT)+"ms"))}setTimeout(t,g)}},g)})});return h.catch(function(){(0,a.markResponseListenerErrored)(f),(0,a.deleteResponseListener)(f)}),m.push(h),h})}function d(e,n,t,r){return(r=r||{}).window=e,r.name=n,r.data=t,l(r)}u.global.requestPromises=u.global.requestPromises||new r.WeakMap,n.send=d,u.global.send=d},"./node_modules/post-robot/src/public/config.js":function(e,n,t){"use strict";n.__esModule=!0,n.CONSTANTS=n.CONFIG=void 0;var r=t("./node_modules/post-robot/src/conf/index.js");Object.defineProperty(n,"CONFIG",{enumerable:!0,get:function(){return r.CONFIG}}),Object.defineProperty(n,"CONSTANTS",{enumerable:!0,get:function(){return r.CONSTANTS}}),n.disable=function(){delete window[r.CONSTANTS.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",o.messageListener)};var o=t("./node_modules/post-robot/src/drivers/index.js")},"./node_modules/post-robot/src/public/index.js":function(e,n,t){"use strict";n.__esModule=!0,n.parent=void 0;var r=t("./node_modules/post-robot/src/public/client.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./node_modules/post-robot/src/public/server.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./node_modules/post-robot/src/public/config.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./node_modules/cross-domain-utils/src/index.js");n.parent=(0,s.getAncestor)()},"./node_modules/post-robot/src/public/server.js":function(e,n,t){"use strict";n.__esModule=!0,n.on=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.listen=l,n.once=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];"function"==typeof n&&(t=n,n={}),n=n||{},t=t||n.handler;var r=n.errorHandler,o=new i.ZalgoPromise(function(o,i){(n=n||{}).name=e,n.once=!0,n.handler=function(e){if(o(e),t)return t(e)},n.errorHandler=function(e){if(i(e),r)return r(e)}}),s=l(n);return o.cancel=s.cancel,o},n.listener=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(n,t){return d(n,e,t)}}};var o=t("./node_modules/cross-domain-utils/src/index.js"),i=t("./node_modules/zalgo-promise/src/index.js"),s=t("./node_modules/post-robot/src/lib/index.js"),a=t("./node_modules/post-robot/src/drivers/index.js"),c=t("./node_modules/post-robot/src/conf/index.js"),u=t("./node_modules/post-robot/src/global.js");function l(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var n=e.name,t=e.window,i=e.domain,u={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:t,domain:i||c.CONSTANTS.WILDCARD,name:n},l=(0,a.addRequestListener)({name:n,win:t,domain:i},u);if(e.once){var d=u.handler;u.handler=(0,s.once)(function(){return l.cancel(),d.apply(this,arguments)})}if(u.window&&e.errorOnClose)var f=(0,s.safeInterval)(function(){t&&"object"===(void 0===t?"undefined":r(t))&&(0,o.isWindowClosed)(t)&&(f.cancel(),u.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){l.cancel()}}}function d(e,n,t){return"function"==typeof n&&(t=n,n={}),(n=n||{}).name=e,n.handler=t||n.handler,l(n)}n.on=d,u.global.on=d},"./node_modules/process/browser.js":function(e,n,t){"use strict";var r,o,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(n){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{o="function"==typeof clearTimeout?clearTimeout:a}catch(e){o=a}}();var u,l=[],d=!1,f=-1;function p(){d&&u&&(d=!1,u.length?l=u.concat(l):f=-1,l.length&&m())}function m(){if(!d){var e=c(p);d=!0;for(var n=l.length;n;){for(u=l,l=[];++f<n;)u&&u[f].run();f=-1,n=l.length}u=null,d=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===a||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(n){try{return o.call(null,e)}catch(n){return o.call(this,e)}}}(e)}}function h(e,n){this.fun=e,this.array=n}function g(){}i.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];l.push(new h(e,n)),1!==l.length||d||c(m)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/webpack/buildin/amd-options.js":function(e,n){(function(n){e.exports=n}).call(n,{})},"./node_modules/webpack/buildin/global.js":function(e,n,t){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}e.exports=r},"./node_modules/webpack/buildin/module.js":function(e,n,t){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./node_modules/zalgo-promise/src/exceptions.js":function(e,n,t){"use strict";n.__esModule=!0,n.dispatchPossiblyUnhandledError=function(e){if(-1===(0,r.getGlobal)().dispatchedErrors.indexOf(e)){(0,r.getGlobal)().dispatchedErrors.push(e),setTimeout(function(){throw e},1);for(var n=0;n<(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.length;n++)(0,r.getGlobal)().possiblyUnhandledPromiseHandlers[n](e)}},n.onPossiblyUnhandledException=function(e){return(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.push(e),{cancel:function(){(0,r.getGlobal)().possiblyUnhandledPromiseHandlers.splice((0,r.getGlobal)().possiblyUnhandledPromiseHandlers.indexOf(e),1)}}};var r=t("./node_modules/zalgo-promise/src/global.js")},"./node_modules/zalgo-promise/src/global.js":function(e,n,t){"use strict";(function(e){n.__esModule=!0,n.getGlobal=function(){var n=void 0;if("undefined"!=typeof window)n=window;else{if(void 0===e)throw new TypeError("Can not find global");n=e}var t=n.__zalgopromise__=n.__zalgopromise__||{};return t.flushPromises=t.flushPromises||[],t.activeCount=t.activeCount||0,t.possiblyUnhandledPromiseHandlers=t.possiblyUnhandledPromiseHandlers||[],t.dispatchedErrors=t.dispatchedErrors||[],t}}).call(n,t("./node_modules/webpack/buildin/global.js"))},"./node_modules/zalgo-promise/src/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./node_modules/zalgo-promise/src/promise.js");Object.defineProperty(n,"ZalgoPromise",{enumerable:!0,get:function(){return r.ZalgoPromise}})},"./node_modules/zalgo-promise/src/promise.js":function(e,n,t){"use strict";n.__esModule=!0,n.ZalgoPromise=void 0;var r=t("./node_modules/zalgo-promise/src/utils.js"),o=t("./node_modules/zalgo-promise/src/exceptions.js"),i=t("./node_modules/zalgo-promise/src/global.js"),s=function(){function e(n){var t=this;if(function(n,t){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],n){var r=void 0,o=void 0,i=!1,s=!1,a=!1;try{n(function(e){a?t.resolve(e):(i=!0,r=e)},function(e){a?t.reject(e):(s=!0,o=e)})}catch(e){return void this.reject(e)}a=!0,i?this.resolve(r):s&&this.reject(o)}}return e.prototype.resolve=function(e){if(this.resolved||this.rejected)return this;if((0,r.isPromise)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this},e.prototype.reject=function(e){var n=this;if(this.resolved||this.rejected)return this;if((0,r.isPromise)(e))throw new Error("Can not reject promise with another promise");if(!e){var t=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+t)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){n.errorHandled||(0,o.dispatchPossiblyUnhandledError)(e)},1),this.dispatch(),this},e.prototype.asyncReject=function(e){this.errorHandled=!0,this.reject(e)},e.prototype.dispatch=function(){var n=this,t=this.dispatching,o=this.resolved,s=this.rejected,a=this.handlers;if(!t&&(o||s)){this.dispatching=!0,(0,i.getGlobal)().activeCount+=1;for(var c=function(t){var i=a[t],c=i.onSuccess,u=i.onError,l=i.promise,d=void 0;if(o)try{d=c?c(n.value):n.value}catch(e){return l.reject(e),"continue"}else if(s){if(!u)return l.reject(n.error),"continue";try{d=u(n.error)}catch(e){return l.reject(e),"continue"}}d instanceof e&&(d.resolved||d.rejected)?(d.resolved?l.resolve(d.value):l.reject(d.error),d.errorHandled=!0):(0,r.isPromise)(d)?d instanceof e&&(d.resolved||d.rejected)?d.resolved?l.resolve(d.value):l.reject(d.error):d.then(function(e){l.resolve(e)},function(e){l.reject(e)}):l.resolve(d)},u=0;u<a.length;u++)c(u);a.length=0,this.dispatching=!1,(0,i.getGlobal)().activeCount-=1,0===(0,i.getGlobal)().activeCount&&e.flushQueue()}},e.prototype.then=function(n,t){if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for success handler");if(t&&"function"!=typeof t&&!t.call)throw new Error("Promise.then expected a function for error handler");var r=new e;return this.handlers.push({promise:r,onSuccess:n,onError:t}),this.errorHandled=!0,this.dispatch(),r},e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.finally=function(n){return this.then(function(t){return e.try(n).then(function(){return t})},function(t){return e.try(n).then(function(){throw t})})},e.prototype.timeout=function(e,n){var t=this;if(this.resolved||this.rejected)return this;var r=setTimeout(function(){t.resolved||t.rejected||t.reject(n||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(r),e})},e.prototype.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},e.resolve=function(n){return n instanceof e?n:(0,r.isPromise)(n)?new e(function(e,t){return n.then(e,t)}):(new e).resolve(n)},e.reject=function(n){return(new e).reject(n)},e.all=function(n){var t=new e,o=n.length,i=[];if(!o)return t.resolve(i),t;for(var s=function(s){var a=n[s];if(a instanceof e){if(a.resolved)return i[s]=a.value,o-=1,"continue"}else if(!(0,r.isPromise)(a))return i[s]=a,o-=1,"continue";e.resolve(a).then(function(e){i[s]=e,0==(o-=1)&&t.resolve(i)},function(e){t.reject(e)})},a=0;a<n.length;a++)s(a);return 0===o&&t.resolve(i),t},e.hash=function(n){var t={};return e.all(Object.keys(n).map(function(r){return e.resolve(n[r]).then(function(e){t[r]=e})})).then(function(){return t})},e.map=function(n,t){return e.all(n.map(t))},e.onPossiblyUnhandledException=function(e){return(0,o.onPossiblyUnhandledException)(e)},e.try=function(n,t,r){var o=void 0;try{o=n.apply(t,r||[])}catch(n){return e.reject(n)}return e.resolve(o)},e.delay=function(n){return new e(function(e){setTimeout(e,n)})},e.isPromise=function(n){return!!(n&&n instanceof e)||(0,r.isPromise)(n)},e.flush=function(){var n=new e;return(0,i.getGlobal)().flushPromises.push(n),0===(0,i.getGlobal)().activeCount&&e.flushQueue(),n},e.flushQueue=function(){var e=(0,i.getGlobal)().flushPromises;(0,i.getGlobal)().flushPromises=[];var n=e,t=Array.isArray(n),r=0;for(n=t?n:n[Symbol.iterator]();;){var o;if(t){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}o.resolve()}},e}();n.ZalgoPromise=s},"./node_modules/zalgo-promise/src/utils.js":function(e,n,t){"use strict";n.__esModule=!0,n.isPromise=function(e){try{if(!e)return!1;if("undefined"!=typeof Promise&&e instanceof Promise)return!0;if("undefined"!=typeof window&&window.Window&&e instanceof window.Window)return!1;if("undefined"!=typeof window&&window.constructor&&e instanceof window.constructor)return!1;var n={}.toString;if(n){var t=n.call(e);if("[object Window]"===t||"[object global]"===t||"[object DOMWindow]"===t)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}},"./src/component/base.js":function(e,n,t){"use strict";n.__esModule=!0,n.BaseComponent=void 0;var r=t("./node_modules/zalgo-promise/src/index.js"),o=t("./node_modules/post-robot/src/index.js");t("./node_modules/cross-domain-utils/src/index.js");var i=t("./src/lib/index.js");n.BaseComponent=function(){function e(){var n,t,o;!function(n,t){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.clean=(n=this,t=[],o=!1,{set:function(e,t){return o?t:(n[e]=t,this.register(function(){delete n[e]}),t)},register:function(e,n){if("function"==typeof e&&(n=e,e="<anonymous-cleanup-handler>"),"function"!=typeof n)throw new TypeError("Expected to be passed function to clean.register");o?n():t.push({complete:!1,name:e,run:function(){this.complete||(this.complete=!0,n&&n())}})},hasTasks:function(){return Boolean(t.filter(function(e){return!e.complete}).length)},all:function(){var e=[];for(o=!0;t.length;)e.push(t.pop().run());return r.ZalgoPromise.all(e).then(function(){})},run:function(e){var n=[],o=t,s=Array.isArray(o),a=0;for(o=s?o:o[Symbol.iterator]();;){var c;if(s){if(a>=o.length)break;c=o[a++]}else{if((a=o.next()).done)break;c=a.value}var u=c;u.name===e&&n.push(u.run())}return r.ZalgoPromise.all(n).then(i.noop)}}),this.event=(0,i.eventEmitter)()}return e.prototype.addProp=function(e,n,t){(0,i.copyProp)(e,this,n,t)},e.prototype.on=function(e,n){return this.event.on(e,n)},e.prototype.listeners=function(){throw new Error("Expected listeners to be implemented")},e.prototype.error=function(e){throw new Error("Expected error to be implemented - got "+(0,i.stringifyError)(e))},e.prototype.listen=function(e,n){var t=this;if(!e)throw this.component.createError("window to listen to not set");if(!n)throw new Error("Must pass domain to listen to");if(this.listeners){var r=this.listeners(),i=function(){if(a){if(c>=s.length)return"break";u=s[c++]}else{if((c=s.next()).done)return"break";u=c.value}var i=u,l=i.replace(/^zoid_/,""),d=function(e){t.error(e)},f=(0,o.on)(i,{window:e,domain:n,errorHandler:d},function(e){var n=e.source,o=e.data;return t.component.log("listener_"+l),r[i].call(t,n,o)}),p=(0,o.on)(i,{window:e,errorHandler:d},function(e){var r=e.origin;t.component.logError("unexpected_listener_"+l,{origin:r,domain:n.toString()}),t.error(new Error("Unexpected "+l+" message from domain "+r+" -- expected message from "+n.toString()))});t.clean.register(function(){f.cancel(),p.cancel()})},s=Object.keys(r),a=Array.isArray(s),c=0;for(s=a?s:s[Symbol.iterator]();;){var u;if("break"===i())break}}},e}()},"./src/component/child/index.js":function(e,n,t){"use strict";n.__esModule=!0,n.ChildComponent=void 0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=t("./node_modules/beaver-logger/client/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./node_modules/post-robot/src/index.js"),c=t("./node_modules/zalgo-promise/src/index.js"),u=t("./src/component/base.js"),l=t("./src/component/window.js"),d=t("./src/lib/index.js"),f=t("./src/constants.js"),p=t("./src/error.js"),m=t("./src/component/child/props.js");function h(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}n.ChildComponent=function(e){function n(t){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);var r=h(this,e.call(this));if(r.component=t,!r.hasValidParentDomain())return r.error(new p.RenderError("Can not be rendered by domain: "+r.getParentDomain())),h(r);r.component.log("construct_child"),r.onPropHandlers=[];for(var o=[r.component,window],i=function(){for(var e=o[s],n=[["xchild",function(){return r}],["xprops",function(){return r.props}]],t=function(){var t=n[i],o=t[0],s=t[1];Object.defineProperty(e,o,{configurable:!0,get:function(){return r.props||r.setProps(r.getInitialProps(),(0,l.getParentDomain)()),delete e[o],e[o]=s(),e[o]}})},i=0;i<n.length;i++)t()},s=0;s<o.length;s++)i();return r.component.log("init_child"),r.setWindows(),r.listenForResize(),r.onInit=r.sendToParent(f.POST_MESSAGE.INIT,{exports:r.exports()}).then(function(e){var n=e.origin,t=e.data;return r.context=t.context,r.setProps(t.props,n),r.watchForResize(),r}).catch(function(e){throw r.error(e),e}),r}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.listenForResize=function(){var e=this;this.component.listenForResize&&(this.sendToParent(f.POST_MESSAGE.ONRESIZE,{},{fireAndForget:!0}),window.addEventListener("resize",function(){e.sendToParent(f.POST_MESSAGE.ONRESIZE,{},{fireAndForget:!0})}))},n.prototype.hasValidParentDomain=function(){return(0,s.matchDomain)(this.component.allowedParentDomains,this.getParentDomain())},n.prototype.init=function(){return this.onInit},n.prototype.getParentDomain=function(){return(0,l.getParentDomain)()},n.prototype.onProps=function(e){this.onPropHandlers.push(e)},n.prototype.getParentComponentWindow=function(){return(0,l.getParentComponentWindow)()},n.prototype.getParentRenderWindow=function(){return(0,l.getParentRenderWindow)()},n.prototype.getInitialProps=function(){var e=this,n=(0,l.getComponentMeta)(),t=n.props;if(t.type===f.INITIAL_PROPS.RAW)t=t.value;else{if(t.type!==f.INITIAL_PROPS.UID)throw new Error("Unrecognized props type: "+t.type);var r=(0,l.getParentComponentWindow)();if(!(0,s.isSameDomain)(r)){if("file:"===window.location.protocol)throw new Error("Can not get props from file:// domain");throw new Error("Parent component window is on a different domain - expected "+(0,s.getDomain)()+" - can not retrieve props")}var i=(0,d.globalFor)(r);if(!i)throw new Error("Can not find global for parent component - can not retrieve props");t=JSON.parse(i.props[n.uid])}if(!t)throw new Error("Initial props not found");return(0,d.deserializeFunctions)(t,function(n){var t=n.fullKey,r=n.self,i=n.args;return e.onInit.then(function(){var n=(0,d.get)(e.props,t);if("function"!=typeof n)throw new TypeError("Expected "+t+" to be function, got "+(void 0===n?"undefined":o(n)));return n.apply(r,i)})})},n.prototype.setProps=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.props=this.props||{};var r=(0,m.normalizeChildProps)(this.component,e,n,t);(0,d.extend)(this.props,r),this.props.logLevel&&(0,d.setLogLevel)(this.props.logLevel);var o=this.onPropHandlers,i=Array.isArray(o),s=0;for(o=i?o:o[Symbol.iterator]();;){var a;if(i){if(s>=o.length)break;a=o[s++]}else{if((s=o.next()).done)break;a=s.value}a.call(this,this.props)}},n.prototype.sendToParent=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,l.getParentComponentWindow)();if(!o)throw new Error("Can not find parent component window to message");return this.component.log("send_to_parent_"+e),(0,a.send)(o,e,n,r({domain:(0,l.getParentDomain)()},t))},n.prototype.setWindows=function(){if(window.__activeZoidComponent__)throw this.component.createError("Can not attach multiple components to the same window");if(window.__activeZoidComponent__=this,!(0,l.getParentComponentWindow)())throw this.component.createError("Can not find parent window");var e=(0,l.getComponentMeta)();if(e.tag!==this.component.tag)throw this.component.createError("Parent is "+e.tag+" - can not attach "+this.component.tag);this.watchForClose()},n.prototype.watchForClose=function(){var e=this;window.addEventListener("unload",function(){return e.checkClose()})},n.prototype.enableAutoResize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,t=void 0===n||n,r=e.height,o=void 0===r||r;this.autoResize={width:t,height:o},this.watchForResize()},n.prototype.getAutoResize=function(){var e=!1,n=!1,t=this.autoResize||this.component.autoResize;return"object"===(void 0===t?"undefined":o(t))?(e=Boolean(t.width),n=Boolean(t.height)):t&&(e=!0,n=!0),{width:e,height:n,element:t.element?(0,d.getElement)(t.element):window.navigator.userAgent.match(/MSIE (9|10)\./)?document.body:document.documentElement}},n.prototype.watchForResize=function(){var e=this,n=this.getAutoResize(),t=n.width,r=n.height,o=n.element;if((t||r)&&this.context!==f.CONTEXT_TYPES.POPUP&&!this.watchingForResize)return this.watchingForResize=!0,c.ZalgoPromise.try(function(){return d.documentReady}).then(function(){if(!(0,d.dimensionsMatchViewport)(o,{width:t,height:r}))return e.resizeToElement(o,{width:t,height:r})}).then(function(){return(0,d.cycle)(function(){return(0,d.onDimensionsChange)(o,{width:t,height:r}).then(function(){return e.resizeToElement(o,{width:t,height:r})})})})},n.prototype.exports=function(){var e=this;return{updateProps:function(n){var t=this;return c.ZalgoPromise.try(function(){return e.setProps(n,t.origin,!1)})},close:function(){return c.ZalgoPromise.try(function(){return e.destroy()})}}},n.prototype.resize=function(e,n){var t=this;return c.ZalgoPromise.resolve().then(function(){if(t.component.log("resize",{width:(0,d.stringify)(e),height:(0,d.stringify)(n)}),t.context!==f.CONTEXT_TYPES.POPUP)return t.sendToParent(f.POST_MESSAGE.RESIZE,{width:e,height:n}).then(d.noop)})},n.prototype.resizeToElement=function(e,n){var t=this,r=n.width,o=n.height,i=[];return function n(){return c.ZalgoPromise.try(function(){var s=(0,d.trackDimensions)(e,{width:r,height:o}),a=s.check().dimensions,c=i,u=Array.isArray(c),l=0;for(c=u?c:c[Symbol.iterator]();;){var f;if(u){if(l>=c.length)break;f=c[l++]}else{if((l=c.next()).done)break;f=l.value}var p=f,m=!r||p.width===a.width,h=!o||p.height===a.height;if(m&&h)return}return i.push({width:a.width,height:a.height}),t.resize(r?a.width:null,o?a.height:null).then(function(){if(s.check().changed)return n()})})}()},n.prototype.hide=function(){return this.sendToParent(f.POST_MESSAGE.HIDE).then(d.noop)},n.prototype.show=function(){return this.sendToParent(f.POST_MESSAGE.SHOW).then(d.noop)},n.prototype.userClose=function(){return this.close(f.CLOSE_REASONS.USER_CLOSED)},n.prototype.close=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.CLOSE_REASONS.CHILD_CALL;this.component.log("close_child"),this.sendToParent(f.POST_MESSAGE.CLOSE,{reason:e})},n.prototype.checkClose=function(){this.sendToParent(f.POST_MESSAGE.CHECK_CLOSE,{},{fireAndForget:!0})},n.prototype.destroy=function(){return(0,i.flush)().then(function(){window.close()})},n.prototype.focus=function(){this.component.log("focus"),window.focus()},n.prototype.error=function(e){var n=(0,d.stringifyError)(e);return this.component.logError("error",{error:n}),this.sendToParent(f.POST_MESSAGE.ERROR,{error:n}).then(d.noop)},n}(u.BaseComponent)},"./src/component/child/props.js":function(e,n,t){"use strict";n.__esModule=!0,n.normalizeChildProp=o,n.normalizeChildProps=function(e,n,t){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s={},a=Object.keys(n),c=Array.isArray(a),u=0;for(a=c?a:a[Symbol.iterator]();;){var l;if(c){if(u>=a.length)break;l=a[u++]}else{if((u=a.next()).done)break;l=u.value}var d=l,f=e.getProp(d),p=n[d];f&&f.sameDomain&&t!==(0,r.getDomain)(window)||(s[d]=o(e,n,d,p),f&&f.alias&&!s[f.alias]&&(s[f.alias]=p))}if(i){var m=e.getPropNames(),h=Array.isArray(m),g=0;for(m=h?m:m[Symbol.iterator]();;){var w;if(h){if(g>=m.length)break;w=m[g++]}else{if((g=m.next()).done)break;w=g.value}var y=w;n.hasOwnProperty(y)||(s[y]=o(e,n,y,n[y]))}}return s};var r=t("./node_modules/cross-domain-utils/src/index.js");function o(e,n,t,r){var o=e.getProp(t);return o?"function"==typeof o.childDecorate?o.childDecorate(r):r:e.looseProps?r:void 0}},"./src/component/component/index.js":function(e,n,t){"use strict";n.__esModule=!0,n.Component=void 0;var r,o,i,s,a,c,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=t("./node_modules/post-robot/src/index.js"),d=t("./node_modules/zalgo-promise/src/index.js"),f=t("./node_modules/cross-domain-utils/src/index.js"),p=t("./src/component/base.js"),m=t("./src/component/child/index.js"),h=t("./src/component/parent/index.js"),g=t("./src/component/delegate/index.js"),w=t("./src/component/window.js"),y=t("./src/constants.js"),v=t("./src/drivers/index.js"),b=t("./src/lib/index.js"),E=t("./src/component/component/validate.js"),_=t("./src/component/component/templates/index.js"),S=t("./src/component/component/props.js"),O={angular:v.angular,angular2:v.angular2,glimmer:v.glimmer,react:v.react,vue:v.vue,script:v.script};(n.Component=(o=(r=function(e){function n(t){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);var r=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,e.call(this));if((0,E.validate)(t),r.addProp(t,"tag"),r.addProp(t,"defaultLogLevel","info"),r.addProp(t,"allowedParentDomains",y.WILDCARD),(0,b.setLogLevel)(r.defaultLogLevel),n.components[r.tag])throw new Error("Can not register multiple components with the same tag");return r.addProp(t,"name",r.tag.replace(/-/g,"_")),r.builtinProps=(0,S.getInternalProps)(),r.props=t.props||{},t.props||(r.looseProps=!0),r.addProp(t,"dimensions"),r.addProp(t,"scrolling"),r.addProp(t,"listenForResize"),r.addProp(t,"version","latest"),r.addProp(t,"defaultEnv"),r.addProp(t,"buildUrl"),r.addProp(t,"url"),r.addProp(t,"domain"),r.addProp(t,"bridgeUrl"),r.addProp(t,"bridgeDomain"),r.addProp(t,"attributes",{}),r.addProp(t,"contexts",{iframe:!0,popup:!1}),r.addProp(t,"defaultContext"),r.addProp(t,"autoResize",!1),r.addProp(t,"containerTemplate",_.defaultContainerTemplate),r.addProp(t,"prerenderTemplate",_.defaultPrerenderTemplate),r.addProp(t,"validate"),r.addProp(t,"unsafeRenderTo",!1),n.components[r.tag]=r,r.registerDrivers(),r.registerChild(),r.listenDelegate(),r}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.getPropNames=function(){var e=Object.keys(this.props),n=Object.keys(this.builtinProps),t=Array.isArray(n),r=0;for(n=t?n:n[Symbol.iterator]();;){var o;if(t){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o;-1===e.indexOf(i)&&e.push(i)}return e},n.prototype.getProp=function(e){return this.props[e]||this.builtinProps[e]},n.prototype.registerDrivers=function(){this.driverCache={};var e=Object.keys(O),n=Array.isArray(e),t=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(t>=e.length)break;r=e[t++]}else{if((t=e.next()).done)break;r=t.value}var o=r;if(0!==o.indexOf("_")){var i=O[o].global();i&&this.driver(o,i)}}},n.prototype.driver=function(e,n){if(!O[e])throw new Error("Could not find driver for framework: "+e);return this.driverCache[e]||(this.driverCache[e]=O[e].register(this,n)),this.driverCache[e]},n.prototype.registerChild=function(){var e=this;return d.ZalgoPromise.try(function(){if(e.isChild())return new m.ChildComponent(e)})},n.prototype.listenDelegate=function(){var e=this;(0,l.on)(y.POST_MESSAGE.ALLOW_DELEGATE+"_"+this.name,function(){return!0}),(0,l.on)(y.POST_MESSAGE.DELEGATE+"_"+this.name,function(n){var t=n.source,r=n.origin,o=n.data,i=e.getDomain(null,o.env||e.defaultEnv);if(!i)throw new Error("Could not determine domain to allow remote render");if(!(0,f.matchDomain)(i,r))throw new Error("Can not render from "+r+" - expected "+i.toString());var s=e.delegate(t,o.options);return{overrides:s.getOverrides(o.context),destroy:function(){return s.destroy()}}})},n.prototype.canRenderTo=function(e){return(0,l.send)(e,y.POST_MESSAGE.ALLOW_DELEGATE+"_"+this.name).then(function(e){return e.data}).catch(function(){return!1})},n.prototype.getValidDomain=function(e){if(e){var n=(0,f.getDomainFromUrl)(e);if("string"==typeof this.domain&&n===this.domain)return n;var t=this.domain;if(t&&"object"===(void 0===t?"undefined":u(t))&&!(t instanceof RegExp)){var r=Object.keys(t),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}if("test"!==s&&n===t[s])return n}}}},n.prototype.getDomain=function(e,n){var t=this.getForEnv(this.domain,n);if(t)return t;if(t=this.getValidDomain(e))return t;var r=this.getForEnv(this.url,n);return r?(0,f.getDomainFromUrl)(r):e?(0,f.getDomainFromUrl)(e):void 0},n.prototype.getBridgeUrl=function(e){return this.getForEnv(this.bridgeUrl,e)},n.prototype.getForEnv=function(e,n){if(e){if("string"==typeof e||e instanceof RegExp)return e;if(n||(n=this.defaultEnv),n)return n&&"object"===(void 0===e?"undefined":u(e))&&e[n]?e[n]:void 0}},n.prototype.getBridgeDomain=function(e){var n=this.getForEnv(this.bridgeDomain,e);if(n)return n;var t=this.getBridgeUrl(e);return t?(0,f.getDomainFromUrl)(t):void 0},n.prototype.getUrl=function(e,n){var t=this.getForEnv(this.url,e);if(t)return t;if(this.buildUrl)return this.buildUrl(n);throw new Error("Unable to get url")},n.prototype.isZoidComponent=function(){return(0,w.isZoidComponentWindow)()},n.prototype.isChild=function(){return(0,w.isZoidComponentWindow)()&&(0,w.getComponentMeta)().tag===this.tag},n.prototype.createError=function(e,n){return new Error("["+(n||this.tag)+"] "+e)},n.prototype.init=function(e,n,t){return new h.ParentComponent(this,this.getRenderContext(n,t),{props:e})},n.prototype.delegate=function(e,n){return new g.DelegateComponent(this,e,n)},n.prototype.validateRenderContext=function(e,n){if(e&&!this.contexts[e])throw new Error("["+this.tag+"] Can not render to "+e);if(!n&&e===y.CONTEXT_TYPES.IFRAME)throw new Error("["+this.tag+"] Context type "+y.CONTEXT_TYPES.IFRAME+" requires an element selector")},n.prototype.getDefaultContext=function(){if(this.defaultContext)return this.defaultContext;if(this.contexts[y.CONTEXT_TYPES.IFRAME])return y.CONTEXT_TYPES.IFRAME;if(this.contexts[y.CONTEXT_TYPES.POPUP])return y.CONTEXT_TYPES.POPUP;throw new Error("Can not determine default context")},n.prototype.getRenderContext=function(e,n){return e=e||this.getDefaultContext(),this.validateRenderContext(e,n),e},n.prototype.render=function(e,n){var t=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(t,t.getRenderContext(null,n),{props:e}).render(n)})},n.prototype.renderIframe=function(e,n){var t=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(t,t.getRenderContext(y.CONTEXT_TYPES.IFRAME,n),{props:e}).render(n)})},n.prototype.renderPopup=function(e){var n=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(n,n.getRenderContext(y.CONTEXT_TYPES.POPUP),{props:e}).render()})},n.prototype.renderTo=function(e,n,t){var r=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(r,r.getRenderContext(null,t),{props:n}).renderTo(e,t)})},n.prototype.renderIframeTo=function(e,n,t){var r=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(r,r.getRenderContext(y.CONTEXT_TYPES.IFRAME,t),{props:n}).renderTo(e,t)})},n.prototype.renderPopupTo=function(e,n){var t=this;return d.ZalgoPromise.try(function(){return new h.ParentComponent(t,t.getRenderContext(y.CONTEXT_TYPES.POPUP),{props:n}).renderTo(e)})},n.prototype.prerender=function(e,n){var t=new h.ParentComponent(this,this.getRenderContext(null,n),{props:e});return t.prefetch(),{render:function(e,n){return e&&t.updateProps(e),t.render(n)},renderTo:function(e,n,r){return n&&t.updateProps(n),t.renderTo(e,r)},get html(){return t.html},set html(e){t.html=e}}},n.prototype.log=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,b.info)(this.name,e,n)},n.prototype.logWarning=function(e,n){(0,b.warn)(this.name,e,n)},n.prototype.logError=function(e,n){(0,b.error)(this.name,e,n)},n.getByTag=function(e){return n.components[e]},n}(p.BaseComponent)).prototype,i=[b.memoize],s=Object.getOwnPropertyDescriptor(r.prototype,"getPropNames"),a=r.prototype,c={},Object.keys(s).forEach(function(e){c[e]=s[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=i.slice().reverse().reduce(function(e,n){return n(o,"getPropNames",e)||e},c),a&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(a):void 0,c.initializer=void 0),void 0===c.initializer&&(Object.defineProperty(o,"getPropNames",c),c=null),r)).components={}},"./src/component/component/props.js":function(e,n,t){"use strict";n.__esModule=!0,n.getInternalProps=function(){return{env:{type:"string",required:!1,queryParam:!0,def:function(){return this.defaultEnv}},uid:{type:"string",def:function(){return(0,r.uniqueID)()},queryParam:!0},logLevel:{type:"string",required:!1,queryParam:!0,def:function(){return this.defaultLogLevel}},url:{type:"string",required:!1,promise:!0,sendToChild:!1},dimensions:{type:"object",required:!1},version:{type:"string",required:!1,queryParam:!0,def:function(){return this.version}},timeout:{type:"number",required:!1,sendToChild:!1},onDisplay:{type:"function",required:!1,noop:!0,promisify:!0,memoize:!0,sendToChild:!1},onEnter:{type:"function",required:!1,noop:!0,promisify:!0,sendToChild:!1},onRender:{type:"function",required:!1,noop:!0,promisify:!0,sendToChild:!1},onClose:{type:"function",required:!1,noop:!0,once:!0,promisify:!0,sendToChild:!1},onTimeout:{type:"function",required:!1,memoize:!0,promisify:!0,sendToChild:!1,def:function(){return function(e){if(this.props.onError)return this.props.onError(e);throw e}}},onError:{type:"function",required:!1,promisify:!0,sendToChild:!0,once:!0,def:function(){return function(e){setTimeout(function(){throw e})}}}}},t("./node_modules/zalgo-promise/src/index.js");var r=t("./src/lib/index.js");t("./src/types.js")},"./src/component/component/templates/component.jsx":function(e,n,t){"use strict";n.__esModule=!0,n.defaultPrerenderTemplate=function(e){var n=e.jsxDom;return n("html",null,n("head",null,n("style",null,"\n                        html, body {\n                            width: 100%;\n                            height: 100%;\n                            overflow: hidden;\n                            top: 0;\n                            left: 0;\n                            margin: 0;\n                            text-align: center;\n                        }\n\n                        .spinner {\n                            position: absolute;\n                            max-height: 60vmin;\n                            max-width: 60vmin;\n                            height: 40px;\n                            width: 40px;\n                            top: 50%;\n                            left: 50%;\n                            transform: translateX(-50%) translateY(-50%);\n                            z-index: 10;\n                        }\n\n                        .spinner .loader {\n                            height: 100%;\n                            width: 100%;\n                            box-sizing: border-box;\n                            border: 3px solid rgba(0, 0, 0, .2);\n                            border-top-color: rgba(33, 128, 192, 0.8);\n                            border-radius: 100%;\n                            animation: rotation .7s infinite linear;\n\n                        }\n\n                        @keyframes rotation {\n                            from {\n                                transform: rotate(0deg)\n                            }\n                            to {\n                                transform: rotate(359deg)\n                            }\n                        }\n                    ")),n("body",null,n("div",{class:"spinner"},n("div",{id:"loader",class:"loader"}))))},t("./src/component/parent/index.js")},"./src/component/component/templates/container.jsx":function(e,n,t){"use strict";n.__esModule=!0,n.defaultContainerTemplate=function(e){var n=e.id,t=e.tag,r=e.context,o=e.CLASS,i=e.outlet,s=e.jsxDom,a=e.dimensions,c=a.width,u=a.height;return s("div",{id:n,class:o.ZOID+" "+o.ZOID+"-tag-"+t+" "+o.ZOID+"-context-"+r},s("style",null,"\n                    #"+n+", #"+n+" > ."+o.OUTLET+" {\n                        width: "+c+";\n                        height: "+u+";\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" {\n                        display: inline-block;\n                        position: relative;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe {\n                        height: 100%;\n                        width: 100%;\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        transition: opacity .2s ease-in-out;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe."+o.VISIBLE+" {\n                        opacity: 1;\n                    }\n\n                    #"+n+" > ."+o.OUTLET+" > iframe."+o.INVISIBLE+" {\n                        opacity: 0;\n                    }\n                "),i)},t("./src/component/parent/index.js")},"./src/component/component/templates/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./src/component/component/templates/container.jsx");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./src/component/component/templates/component.jsx");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},"./src/component/component/validate.js":function(e,n,t){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.validate=function(e){if(!e)throw new Error("Expecred options to be passed");if(!e.tag||!e.tag.match(/^[a-z0-9-]+$/))throw new Error("Invalid options.tag: "+e.tag);if(function(e){if(e.props&&"object"!==r(e.props))throw new Error("Expected options.props to be an object");if(e.props){var n=Object.keys(e.props),t=Array.isArray(n),i=0;for(n=t?n:n[Symbol.iterator]();;){var s;if(t){if(i>=n.length)break;s=n[i++]}else{if((i=n.next()).done)break;s=i.value}var a=s,c=e.props[a];if(!c||"object"!==(void 0===c?"undefined":r(c)))throw new Error("Expected options.props."+a+" to be an object");if(!c.type)throw new Error("Expected prop.type");if(-1===o.PROP_TYPES_LIST.indexOf(c.type))throw new Error("Expected prop.type to be one of "+o.PROP_TYPES_LIST.join(", "));if(c.required&&c.def)throw new Error("Required prop can not have a default value")}}}(e),e.dimensions){if(e.dimensions&&!(0,i.isPx)(e.dimensions.width)&&!(0,i.isPerc)(e.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(e.dimensions&&!(0,i.isPx)(e.dimensions.height)&&!(0,i.isPerc)(e.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(e.contexts){e.contexts.popup;var n=!1,t=Object.keys(e.contexts),s=Array.isArray(t),a=0;for(t=s?t:t[Symbol.iterator]();;){var c;if(s){if(a>=t.length)break;c=t[a++]}else{if((a=t.next()).done)break;c=a.value}var u=c;if(-1===o.CONTEXT_TYPES_LIST.indexOf(u))throw new Error("Unsupported context type: "+u);(e.contexts&&e.contexts[u]||e.contexts&&void 0===e.contexts[u])&&(n=!0)}if(!n)throw new Error("No context type is enabled")}if(e.defaultContext){if(-1===o.CONTEXT_TYPES_LIST.indexOf(e.defaultContext))throw new Error("Unsupported context type: "+(e.defaultContext||"unknown"));if(e.contexts&&e.defaultContext&&!e.contexts[e.defaultContext])throw new Error("Disallowed default context type: "+(e.defaultContext||"unknown"))}if(e.url&&e.buildUrl)throw new Error("Can not pass both options.url and options.buildUrl");if(e.defaultEnv){if("string"!=typeof e.defaultEnv)throw new TypeError("Expected options.defaultEnv to be a string");if(!e.buildUrl&&"object"!==r(e.url))throw new Error("Expected options.url to be an object mapping env->url");if(e.url&&"object"===r(e.url)&&!e.url[e.defaultEnv])throw new Error("No url found for default env: "+e.defaultEnv)}if(e.url&&"object"===r(e.url)){if(!e.defaultEnv)throw new Error("Must pass options.defaultEnv with env->url mapping");var l=Object.keys(e.url),d=Array.isArray(l),f=0;for(l=d?l:l[Symbol.iterator]();;){var p;if(d){if(f>=l.length)break;p=l[f++]}else{if((f=l.next()).done)break;p=f.value}var m=p;if(!e.url[m])throw new Error("No url specified for env: "+m)}}if(e.prerenderTemplate&&"function"!=typeof e.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(e.containerTemplate&&"function"!=typeof e.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")};var o=t("./src/constants.js"),i=t("./src/lib/index.js")},"./src/component/delegate/index.js":function(e,n,t){"use strict";n.__esModule=!0,n.DelegateComponent=void 0;var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),o=t("./node_modules/cross-domain-utils/src/index.js"),i=(t("./node_modules/zalgo-promise/src/index.js"),t("./src/component/base.js")),s=t("./src/component/parent/index.js"),a=t("./src/component/parent/drivers.js"),c=t("./src/lib/index.js");n.DelegateComponent=function(e){function n(t,r,o){!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);var i=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,e.call(this));i.component=t,i.clean.set("source",r),i.context=o.context,i.props={uid:o.props.uid,dimensions:o.props.dimensions,onClose:o.props.onClose,onDisplay:o.props.onDisplay};var u=t.getPropNames(),l=Array.isArray(u),d=0;for(u=l?u:u[Symbol.iterator]();;){var f;if(l){if(d>=u.length)break;f=u[d++]}else{if((d=u.next()).done)break;f=d.value}var p=f;i.component.getProp(p).allowDelegate&&(i.props[p]=o.props[p])}i.focus=function(){return o.overrides.focus.call(i)},i.clean.register("destroyFocusOverride",function(){i.focus=c.noop}),i.userClose=o.overrides.userClose,i.getDomain=o.overrides.getDomain,i.error=o.overrides.error,i.on=o.overrides.on;var m=a.RENDER_DRIVERS[o.context].delegateOverrides,h=Object.keys(m),g=Array.isArray(h),w=0;for(h=g?h:h[Symbol.iterator]();;){var y;if(g){if(w>=h.length)break;y=h[w++]}else{if((w=h.next()).done)break;y=w.value}var v=y;i[v]=s.ParentComponent.prototype[v]}return i.childWindowName=o.childWindowName,s.ParentComponent.prototype.registerActiveComponent.call(i),i.watchForClose(),i}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.watchForClose=function(){var e=this,n=(0,o.onCloseWindow)(this.source,function(){return e.destroy()},3e3);this.clean.register("destroyCloseWindowListener",n.cancel)},n.prototype.getOverrides=function(e){var n=a.RENDER_DRIVERS[e].delegateOverrides,t={},r=this,o=function(){if(c){if(u>=i.length)return"break";l=i[u++]}else{if((u=i.next()).done)return"break";l=u.value}var e=l;t[e]=function(){return s.ParentComponent.prototype[e].apply(r,arguments)}},i=Object.keys(n),c=Array.isArray(i),u=0;for(i=c?i:i[Symbol.iterator]();;){var l;if("break"===o())break}return t},n.prototype.destroy=function(){return this.clean.all()},r(n,[{key:"driver",get:function(){if(!this.context)throw new Error("Context not set");return a.RENDER_DRIVERS[this.context]}}]),n}(i.BaseComponent)},"./src/component/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./src/component/component/index.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./src/component/parent/index.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/component/child/index.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})})},"./src/component/parent/drivers.js":function(e,n,t){"use strict";n.__esModule=!0,n.RENDER_DRIVERS=void 0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./node_modules/post-robot/src/index.js"),s=t("./node_modules/cross-domain-utils/src/index.js"),a=t("./src/lib/index.js"),c=t("./src/constants.js"),u=t("./src/component/window.js"),l=n.RENDER_DRIVERS={};l[c.CONTEXT_TYPES.IFRAME]={focusable:!1,renderedIntoContainerTemplate:!0,allowResize:!0,openOnClick:!1,needsBridge:!1,open:function(e){var n=this,t=this.component.attributes.iframe||{};return this.iframe=(0,a.iframe)({url:e,attributes:r({name:this.childWindowName,title:this.component.name,scrolling:this.component.scrolling?"yes":"no"},t),class:[c.CLASS_NAMES.COMPONENT_FRAME,c.CLASS_NAMES.INVISIBLE]},this.element),(0,a.awaitFrameWindow)(this.iframe).then(function(e){n.window=e;var t=function(){return o.ZalgoPromise.try(function(){return n.props.onClose(c.CLOSE_REASONS.CLOSE_DETECTED)}).finally(function(){return n.destroy()})},r=(0,a.watchElementForClose)(n.iframe,t),s=(0,a.watchElementForClose)(n.element,t);n.clean.register("destroyWindow",function(){r.cancel(),s.cancel(),(0,i.cleanUpWindow)(n.window),delete n.window,n.iframe&&((0,a.destroyElement)(n.iframe),delete n.iframe)})})},openPrerender:function(){var e=this,n=this.component.attributes.iframe||{};return this.prerenderIframe=(0,a.iframe)({attributes:r({name:"__prerender__"+this.childWindowName,scrolling:this.component.scrolling?"yes":"no"},n),class:[c.CLASS_NAMES.PRERENDER_FRAME,c.CLASS_NAMES.VISIBLE]},this.element),(0,a.awaitFrameWindow)(this.prerenderIframe).then(function(n){e.prerenderWindow=n,e.clean.register("destroyPrerender",function(){e.prerenderIframe&&((0,a.destroyElement)(e.prerenderIframe),delete e.prerenderIframe)})})},switchPrerender:function(){var e=this;(0,a.addClass)(this.prerenderIframe,c.CLASS_NAMES.INVISIBLE),(0,a.removeClass)(this.prerenderIframe,c.CLASS_NAMES.VISIBLE),(0,a.addClass)(this.iframe,c.CLASS_NAMES.VISIBLE),(0,a.removeClass)(this.iframe,c.CLASS_NAMES.INVISIBLE),setTimeout(function(){e.prerenderIframe&&(0,a.destroyElement)(e.prerenderIframe)},1e3)},delegateOverrides:{openContainer:c.DELEGATE.CALL_DELEGATE,destroyComponent:c.DELEGATE.CALL_DELEGATE,destroyContainer:c.DELEGATE.CALL_DELEGATE,cancelContainerEvents:c.DELEGATE.CALL_DELEGATE,createPrerenderTemplate:c.DELEGATE.CALL_DELEGATE,elementReady:c.DELEGATE.CALL_DELEGATE,showContainer:c.DELEGATE.CALL_DELEGATE,showComponent:c.DELEGATE.CALL_DELEGATE,hideContainer:c.DELEGATE.CALL_DELEGATE,hideComponent:c.DELEGATE.CALL_DELEGATE,hide:c.DELEGATE.CALL_DELEGATE,show:c.DELEGATE.CALL_DELEGATE,resize:c.DELEGATE.CALL_DELEGATE,loadUrl:c.DELEGATE.CALL_DELEGATE,hijackSubmit:c.DELEGATE.CALL_DELEGATE,openPrerender:c.DELEGATE.CALL_DELEGATE,switchPrerender:c.DELEGATE.CALL_DELEGATE,renderTemplate:c.DELEGATE.CALL_ORIGINAL,openContainerFrame:c.DELEGATE.CALL_ORIGINAL,getOutlet:c.DELEGATE.CALL_ORIGINAL,open:function(e,n){return function(){var e=this;return n.apply(this,arguments).then(function(){if(e.clean.set("window",(0,s.findFrameByName)((0,u.getParentComponentWindow)(),e.childWindowName)),!e.window)throw new Error("Unable to find parent component iframe window")})}}},resize:function(e,n){e&&(this.container.style.width=(0,a.toCSS)(e),this.element.style.width=(0,a.toCSS)(e)),n&&(this.container.style.height=(0,a.toCSS)(n),this.element.style.height=(0,a.toCSS)(n))},show:function(){(0,a.showElement)(this.element)},hide:function(){(0,a.hideElement)(this.element)},loadUrl:function(e){this.iframe.setAttribute("src",e)}},l[c.CONTEXT_TYPES.POPUP]={focusable:!0,renderedIntoContainerTemplate:!1,allowResize:!1,openOnClick:!0,needsBridge:!0,open:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o.ZalgoPromise.try(function(){var t=e.component.dimensions||{},o=t.width,s=void 0===o?c.DEFAULT_DIMENSIONS.WIDTH:o,l=t.height,d=void 0===l?c.DEFAULT_DIMENSIONS.HEIGHT:l;s=(0,a.normalizeDimension)(s,window.outerWidth),d=(0,a.normalizeDimension)(d,window.outerWidth);var f=(0,u.getPosition)({width:s,height:d}),p=f.x,m=f.y,h=e.component.attributes.popup||{};e.window=(0,a.popup)(n||"",r({name:e.childWindowName,width:s,height:d,top:m,left:p,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},h)),e.prerenderWindow=e.window,e.clean.register("destroyWindow",function(){e.window&&(e.window.close(),(0,i.cleanUpWindow)(e.window),delete e.window,delete e.prerenderWindow)}),e.resize(s,d)})},openPrerender:function(){return o.ZalgoPromise.try(a.noop)},resize:function(){},hide:function(){throw new Error("Can not hide popup")},show:function(){throw new Error("Can not show popup")},delegateOverrides:{openContainer:c.DELEGATE.CALL_DELEGATE,destroyContainer:c.DELEGATE.CALL_DELEGATE,elementReady:c.DELEGATE.CALL_DELEGATE,showContainer:c.DELEGATE.CALL_DELEGATE,showComponent:c.DELEGATE.CALL_DELEGATE,hideContainer:c.DELEGATE.CALL_DELEGATE,hideComponent:c.DELEGATE.CALL_DELEGATE,hide:c.DELEGATE.CALL_DELEGATE,show:c.DELEGATE.CALL_DELEGATE,cancelContainerEvents:c.DELEGATE.CALL_DELEGATE,open:c.DELEGATE.CALL_ORIGINAL,loadUrl:c.DELEGATE.CALL_ORIGINAL,createPrerenderTemplate:c.DELEGATE.CALL_ORIGINAL,destroyComponent:c.DELEGATE.CALL_ORIGINAL,resize:c.DELEGATE.CALL_ORIGINAL,renderTemplate:c.DELEGATE.CALL_ORIGINAL,openContainerFrame:c.DELEGATE.CALL_ORIGINAL,getOutlet:c.DELEGATE.CALL_ORIGINAL},loadUrl:function(e){if((0,s.isSameDomain)(this.window))try{if(this.window.location&&this.window.location.replace)return void this.window.location.replace(e)}catch(e){}this.window.location=e}}},"./src/component/parent/index.js":function(e,n,t){"use strict";n.__esModule=!0,n.ParentComponent=void 0;var r,o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t("./node_modules/beaver-logger/client/index.js"),c=t("./node_modules/post-robot/src/index.js"),u=t("./node_modules/cross-domain-utils/src/index.js"),l=t("./node_modules/zalgo-promise/src/index.js"),d=t("./src/component/base.js"),f=t("./src/component/window.js"),p=t("./src/lib/index.js"),m=t("./src/constants.js"),h=t("./src/error.js"),g=t("./src/component/parent/drivers.js"),w=t("./src/component/parent/validate.js"),y=t("./src/component/parent/props.js");function v(e,n,t,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=t.slice().reverse().reduce(function(t,r){return r(e,n,t)||t},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,n,i),i=null),i}p.global.props=p.global.props||{},p.global.windows=p.global.windows||{},(n.ParentComponent=(v((r=function(e){function n(t,r,o){var i=o.props;!function(e,t){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this);var s=function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,e.call(this));return s.component=t,s.validateParentDomain(),s.context=r,s.setProps(i),s.props.logLevel&&(0,p.setLogLevel)(s.props.logLevel),s.childWindowName=s.buildChildWindowName({renderTo:window}),s.registerActiveComponent(),s.component.log("construct_parent"),s.watchForUnload(),s.onInit=new l.ZalgoPromise,s.onInit.catch(function(e){return s.error(e)}),s}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(n,e),n.prototype.render=function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.tryInit(function(){n.component.log("render_"+n.context,{context:n.context,element:e,loadUrl:(0,p.stringify)(t)});var r={};return r.onRender=n.props.onRender(),r.getDomain=n.getDomain(),r.elementReady=l.ZalgoPromise.try(function(){if(e)return n.elementReady(e)}),r.openContainer=r.elementReady.then(function(){return n.openContainer(e)}),r.showContainer=r.openContainer.then(function(){return n.showContainer()}),r.openPrerender=r.openContainer.then(function(){return n.openPrerender()}),r.switchPrerender=l.ZalgoPromise.all([r.openPrerender,n.onInit]).then(function(){return n.switchPrerender()}),r.open=n.driver.openOnClick?n.open():r.openContainer.then(function(){return n.open()}),r.listen=l.ZalgoPromise.all([r.getDomain,r.open]).then(function(e){var t=e[0];n.listen(n.window,t)}),r.watchForClose=r.open.then(function(){return n.watchForClose()}),r.linkDomain=l.ZalgoPromise.all([r.getDomain,r.open]).then(function(e){var t=e[0];if(c.bridge&&"string"==typeof t)return c.bridge.linkUrl(n.window,t)}),n.html||(r.createPrerenderTemplate=r.openPrerender.then(function(){return n.createPrerenderTemplate()}),r.showComponent=r.createPrerenderTemplate.then(function(){return n.showComponent()})),r.openBridge=l.ZalgoPromise.all([r.getDomain,r.open]).then(function(e){var t=e[0];return n.openBridge("string"==typeof t?t:null)}),n.html?r.loadHTML=r.open.then(function(){return n.loadHTML()}):t&&(r.buildUrl=n.buildUrl(),r.loadUrl=l.ZalgoPromise.all([r.buildUrl,r.open,r.linkDomain,r.listen,r.open,r.openBridge,r.createPrerenderTemplate]).then(function(e){var t=e[0];return n.loadUrl(t)}),r.runTimeout=r.loadUrl.then(function(){return n.runTimeout()})),l.ZalgoPromise.hash(r)}).then(function(){return n.props.onEnter()}).then(function(){return n})},n.prototype.getOutlet=function(){var e=document.createElement("div");return(0,p.addClass)(e,m.CLASS_NAMES.OUTLET),e},n.prototype.validateParentDomain=function(){var e=(0,u.getDomain)();if(!(0,u.matchDomain)(this.component.allowedParentDomains,e))throw new h.RenderError("Can not be rendered by domain: "+e)},n.prototype.renderTo=function(e,n){var t=this;return this.tryInit(function(){if(e===window)return t.render(n);if(!(0,u.isSameTopWindow)(window,e))throw new Error("Can only renderTo an adjacent frame");if(n&&"string"!=typeof n)throw new Error("Element passed to renderTo must be a string selector, got "+(void 0===n?"undefined":i(n))+" "+n);return t.checkAllowRenderTo(e),t.component.log("render_"+t.context+"_to_win",{element:(0,p.stringify)(n),context:t.context}),t.childWindowName=t.buildChildWindowName({renderTo:e}),t.delegate(e),t.render(n)})},n.prototype.prefetch=function(){var e=this;return l.ZalgoPromise.try(function(){e.html=e.buildUrl().then(function(e){return(0,p.prefetchPage)(e).then(function(n){return'\n                        <base href="'+e.split("/").slice(0,3).join("/")+'">\n\n                        '+n+"\n\n                        <script>\n                            if (window.history && window.history.pushState) {\n                                window.history.pushState({}, '', '/"+e.split("/").slice(3).join("/")+"');\n                            }\n                        <\/script>\n                    "})})})},n.prototype.loadHTML=function(){var e=this;return l.ZalgoPromise.try(function(){if(!e.html)throw new Error("Html not prefetched");return e.html.then(function(n){return(0,p.writeToWindow)(e.window,n)})})},n.prototype.checkAllowRenderTo=function(e){if(!e)throw this.component.createError("Must pass window to renderTo");if(!(0,u.isSameDomain)(e)){var n=(0,u.getDomain)(),t=this.component.getDomain(null,this.props.env);if(!t)throw new Error("Could not determine domain to allow remote render");if(!(0,u.matchDomain)(t,n))throw new Error("Can not render remotely to "+t.toString()+" - can only render to "+n)}},n.prototype.registerActiveComponent=function(){var e=this;n.activeComponents.push(this),this.clean.register(function(){n.activeComponents.splice(n.activeComponents.indexOf(e),1)})},n.prototype.getComponentParentRef=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(this.context===m.CONTEXT_TYPES.POPUP)return{ref:m.WINDOW_REFERENCES.OPENER};if(e===window)return(0,u.isTop)(window)?{ref:m.WINDOW_REFERENCES.TOP}:{ref:m.WINDOW_REFERENCES.PARENT,distance:(0,u.getDistanceFromTop)(window)};var n=(0,p.uniqueID)();return p.global.windows[n]=window,this.clean.register(function(){delete p.global.windows[n]}),{ref:m.WINDOW_REFERENCES.GLOBAL,uid:n}},n.prototype.getRenderParentRef=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if(e===window)return this.getComponentParentRef(e);var n=(0,p.uniqueID)();return p.global.windows[n]=e,this.clean.register(function(){delete p.global.windows[n]}),{ref:m.WINDOW_REFERENCES.GLOBAL,uid:n}},n.prototype.buildChildWindowName=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).renderTo,n=void 0===e?window:e,t=(0,u.isSameDomain)(n),r=(0,p.uniqueID)(),o=this.component.tag,i=(0,p.serializeFunctions)(this.getPropsForChild()),s=this.getComponentParentRef(n),a=this.getRenderParentRef(n),c=t||this.component.unsafeRenderTo?{type:m.INITIAL_PROPS.RAW,value:i}:{type:m.INITIAL_PROPS.UID,uid:r};return c.type===m.INITIAL_PROPS.UID&&(p.global.props[r]=JSON.stringify(i),this.clean.register(function(){delete p.global.props[r]})),(0,f.buildChildWindowName)(this.component.name,this.component.version,{uid:r,tag:o,componentParent:s,renderParent:a,props:c})},n.prototype.sendToParent=function(e,n){if(!(0,f.getParentComponentWindow)())throw new Error("Can not find parent component window to message");return this.component.log("send_to_parent_"+e),(0,c.send)((0,f.getParentComponentWindow)(),e,n,{domain:(0,f.getParentDomain)()})},n.prototype.setProps=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,w.validateProps)(this.component,e,n),this.component.validate&&this.component.validate(this.component,e),this.props=this.props||{},(0,p.extend)(this.props,(0,y.normalizeProps)(this.component,this,e))},n.prototype.buildUrl=function(){var e=this;return l.ZalgoPromise.all([this.props.url,(0,y.propsToQuery)(o({},this.component.props,this.component.builtinProps),this.props)]).then(function(n){var t=n[0],r=n[1];return t&&!e.component.getValidDomain(t)?t:l.ZalgoPromise.try(function(){return t||e.component.getUrl(e.props.env,e.props)}).then(function(e){return r.xcomponent="1",(0,p.extendUrl)(e,{query:r})})})},n.prototype.getDomain=function(){var e=this;return l.ZalgoPromise.try(function(){return e.props.url}).then(function(n){return e.component.getDomain(n,e.props.env)||(e.component.buildUrl?l.ZalgoPromise.try(function(){return e.component.buildUrl(e.props)}).then(function(n){return e.component.getDomain(n,e.props.env)}):void 0)}).then(function(e){if(!e)throw new Error("Could not determine domain");return e})},n.prototype.getPropsForChild=function(){var e={},n=Object.keys(this.props),t=Array.isArray(n),r=0;for(n=t?n:n[Symbol.iterator]();;){var o;if(t){if(r>=n.length)break;o=n[r++]}else{if((r=n.next()).done)break;o=r.value}var i=o,s=this.component.getProp(i);s&&!1===s.sendToChild||(e[i]=this.props[i])}return e},n.prototype.updateProps=function(e){var n=this;return this.setProps(e,!1),this.onInit.then(function(){if(n.childExports)return n.childExports.updateProps(n.getPropsForChild());throw new Error("Child exports were not available")})},n.prototype.openBridge=function(e){var n=this;return l.ZalgoPromise.try(function(){if(c.bridge&&n.driver.needsBridge){var t={win:n.window};e&&(t.domain=e);var r=c.bridge.needsBridge(t),o=n.component.getBridgeUrl(n.props.env);if(o){o=(0,p.extendUrl)(o,{query:{version:n.component.version}});var i=n.component.getBridgeDomain(n.props.env);if(!i)throw new Error("Can not determine domain for bridge");return r?c.bridge.openBridge(o,i).then(function(e){if(e)return e}):void 0}if(r&&e&&!c.bridge.hasBridge(e,e))throw new Error("Bridge url needed to render "+n.context)}})},n.prototype.open=function(){var e=this;return l.ZalgoPromise.try(function(){return e.component.log("open_"+e.context,{windowName:e.childWindowName}),e.driver.open.call(e)})},n.prototype.openPrerender=function(){var e=this;return l.ZalgoPromise.try(function(){if(e.component.prerenderTemplate)return e.driver.openPrerender.call(e)})},n.prototype.switchPrerender=function(){var e=this;return l.ZalgoPromise.try(function(){if(e.prerenderWindow&&e.driver.switchPrerender)return e.driver.switchPrerender.call(e)})},n.prototype.elementReady=function(e){return(0,p.elementReady)(e).then(p.noop)},n.prototype.delegate=function(e){var n=this;this.component.log("delegate_"+this.context);var t={uid:this.props.uid,dimensions:this.props.dimensions,onClose:this.props.onClose,onDisplay:this.props.onDisplay},r=this.component.getPropNames(),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s;this.component.getProp(a).allowDelegate&&(t[a]=this.props[a])}var u=(0,c.send)(e,m.POST_MESSAGE.DELEGATE+"_"+this.component.name,{context:this.context,env:this.props.env,options:{context:this.context,childWindowName:this.childWindowName,props:t,overrides:{focus:function(){return n.focus()},userClose:function(){return n.userClose()},getDomain:function(){return n.getDomain()},error:function(e){return n.error(e)},on:function(e,t){return n.on(e,t)}}}}).then(function(e){var t=e.data;return n.clean.register(t.destroy),t}).catch(function(e){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+(0,p.stringifyError)(e))}),l=this.driver.delegateOverrides,d=function(){if(h){if(g>=f.length)return"break";w=f[g++]}else{if((g=f.next()).done)return"break";w=g.value}var e=w,t=l[e];if(t===m.DELEGATE.CALL_ORIGINAL)return"continue";var r=n[e];n[e]=function(){var n=this,o=arguments;return u.then(function(i){var s=i.overrides[e];if(t===m.DELEGATE.CALL_DELEGATE)return s.apply(n,o);if("function"==typeof t)return t(r,s).apply(n,o);throw new Error("Expected delgate to be CALL_ORIGINAL, CALL_DELEGATE, or factory method")})}},f=Object.keys(l),h=Array.isArray(f),g=0;e:for(f=h?f:f[Symbol.iterator]();;){var w;switch(d()){case"break":break e;case"continue":continue}}},n.prototype.watchForClose=function(){var e=this,n=(0,u.onCloseWindow)(this.window,function(){return e.component.log("detect_close_child"),l.ZalgoPromise.try(function(){return e.props.onClose(m.CLOSE_REASONS.CLOSE_DETECTED)}).finally(function(){return e.destroy()})},3e3);this.clean.register("destroyCloseWindowListener",n.cancel)},n.prototype.watchForUnload=function(){var e=this,n=(0,p.once)(function(){e.component.log("navigate_away"),(0,a.flush)(),e.destroyComponent()}),t=(0,p.addEventListener)(window,"unload",n);this.clean.register("destroyUnloadWindowListener",t.cancel)},n.prototype.loadUrl=function(e){var n=this;return l.ZalgoPromise.try(function(){var t;(n.component.log("load_url"),window.location.href.split("#")[0]===e.split("#")[0])&&(e=(0,p.extendUrl)(e,{query:(t={},t[(0,p.uniqueID)()]="1",t)}));return n.driver.loadUrl.call(n,e)})},n.prototype.hijack=function(e){e.target=this.childWindowName},n.prototype.runTimeout=function(){var e=this,n=this.props.timeout;if(n){var t=this.timeout=setTimeout(function(){e.component.log("timed_out",{timeout:n.toString()});var t=e.component.createError("Loading component timed out after "+n+" milliseconds");e.onInit.reject(t),e.props.onTimeout(t)},n);this.clean.register(function(){clearTimeout(t),delete e.timeout})}},n.prototype.listeners=function(){var e;return(e={})[m.POST_MESSAGE.INIT]=function(e,n){return this.childExports=n.exports,this.onInit.resolve(this),this.timeout&&clearTimeout(this.timeout),{props:this.getPropsForChild(),context:this.context}},e[m.POST_MESSAGE.CLOSE]=function(e,n){this.close(n.reason)},e[m.POST_MESSAGE.CHECK_CLOSE]=function(){this.checkClose()},e[m.POST_MESSAGE.RESIZE]=function(e,n){var t=this;return l.ZalgoPromise.try(function(){if(t.driver.allowResize)return t.resize(n.width,n.height)})},e[m.POST_MESSAGE.ONRESIZE]=function(){this.event.trigger("resize")},e[m.POST_MESSAGE.HIDE]=function(){this.hide()},e[m.POST_MESSAGE.SHOW]=function(){this.show()},e[m.POST_MESSAGE.ERROR]=function(e,n){this.error(new Error(n.error))},e},n.prototype.resize=function(e,n){var t=this,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).waitForTransition,o=void 0===r||r;return l.ZalgoPromise.try(function(){if(t.component.log("resize",{height:(0,p.stringify)(n),width:(0,p.stringify)(e)}),t.driver.resize.call(t,e,n),o&&(t.element||t.iframe)){var r=void 0;return t.element&&(r=(0,p.setOverflow)(t.element,"hidden")),(0,p.elementStoppedMoving)(t.element||t.iframe).then(function(){r&&r.reset()})}})},n.prototype.hide=function(){return this.container&&(0,p.hideElement)(this.container),this.driver.hide.call(this)},n.prototype.show=function(){return this.container&&(0,p.showElement)(this.container),this.driver.show.call(this)},n.prototype.checkClose=function(){var e=this,n=(0,u.onCloseWindow)(this.window,function(){e.userClose()},50,500);this.clean.register(n.cancel)},n.prototype.userClose=function(){return this.close(m.CLOSE_REASONS.USER_CLOSED)},n.prototype.close=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CLOSE_REASONS.PARENT_CALL;return l.ZalgoPromise.try(function(){return e.component.log("close",{reason:n}),e.event.triggerOnce(m.EVENTS.CLOSE),e.props.onClose(n)}).then(function(){return l.ZalgoPromise.all([e.closeComponent(),e.closeContainer()])}).then(function(){return e.destroy()})},n.prototype.closeContainer=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CLOSE_REASONS.PARENT_CALL;return l.ZalgoPromise.try(function(){return e.event.triggerOnce(m.EVENTS.CLOSE),e.props.onClose(n)}).then(function(){return l.ZalgoPromise.all([e.closeComponent(n),e.hideContainer()])}).then(function(){return e.destroyContainer()})},n.prototype.destroyContainer=function(){var e=this;return l.ZalgoPromise.try(function(){e.clean.run("destroyContainerEvents"),e.clean.run("destroyContainerTemplate")})},n.prototype.closeComponent=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.CLOSE_REASONS.PARENT_CALL,t=this.window;return l.ZalgoPromise.try(function(){return e.cancelContainerEvents()}).then(function(){return e.event.triggerOnce(m.EVENTS.CLOSE),e.props.onClose(n)}).then(function(){return e.hideComponent()}).then(function(){return e.destroyComponent()}).then(function(){e.childExports&&e.context===m.CONTEXT_TYPES.POPUP&&!(0,u.isWindowClosed)(t)&&e.childExports.close().catch(p.noop)})},n.prototype.destroyComponent=function(){this.clean.run("destroyUnloadWindowListener"),this.clean.run("destroyCloseWindowListener"),this.clean.run("destroyContainerEvents"),this.clean.run("destroyWindow")},n.prototype.showContainer=function(){var e=this;return l.ZalgoPromise.try(function(){if(e.props.onDisplay)return e.props.onDisplay()}).then(function(){if(e.container)return(0,p.showAndAnimate)(e.container,m.ANIMATION_NAMES.SHOW_CONTAINER,e.clean.register)})},n.prototype.showComponent=function(){var e=this;return l.ZalgoPromise.try(function(){if(e.props.onDisplay)return e.props.onDisplay()}).then(function(){if(e.element)return(0,p.showAndAnimate)(e.element,m.ANIMATION_NAMES.SHOW_COMPONENT,e.clean.register)})},n.prototype.hideContainer=function(){var e=this;return l.ZalgoPromise.try(function(){return e.container?(0,p.animateAndHide)(e.container,m.ANIMATION_NAMES.HIDE_CONTAINER,e.clean.register):l.ZalgoPromise.resolve()})},n.prototype.hideComponent=function(){var e=this;return l.ZalgoPromise.try(function(){return e.element?(0,p.animateAndHide)(e.element,m.ANIMATION_NAMES.HIDE_COMPONENT,e.clean.register):l.ZalgoPromise.resolve()})},n.prototype.focus=function(){if(!this.window||(0,u.isWindowClosed)(this.window))throw new Error("No window to focus");this.component.log("focus"),this.window.focus()},n.prototype.createPrerenderTemplate=function(){var e=this;return l.ZalgoPromise.try(function(){return e.component.prerenderTemplate?l.ZalgoPromise.try(function(){return e.prerenderIframe?(0,p.awaitFrameLoad)(e.prerenderIframe).then(function(){return e.prerenderWindow}):e.prerenderWindow}).then(function(n){var t=void 0;try{t=n.document}catch(e){return}try{(0,p.writeElementToWindow)(n,e.renderTemplate(e.component.prerenderTemplate,{jsxDom:p.jsxDom.bind(t),document:t}))}catch(e){}}):l.ZalgoPromise.resolve()})},n.prototype.renderTemplate=function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.component.dimensions||{},i=r.width,s=void 0===i?m.DEFAULT_DIMENSIONS.WIDTH+"px":i,a=r.height,c=void 0===a?m.DEFAULT_DIMENSIONS.HEIGHT+"px":a;return e.call(this,o({id:m.CLASS_NAMES.ZOID+"-"+this.component.tag+"-"+this.props.uid,props:e.__xdomain__?null:this.props,tag:this.component.tag,context:this.context,outlet:this.getOutlet(),CLASS:m.CLASS_NAMES,ANIMATION:m.ANIMATION_NAMES,CONTEXT:m.CONTEXT_TYPES,EVENT:m.EVENTS,actions:{close:function(){return n.userClose()},focus:function(){return n.focus()}},on:function(e,t){return n.on(e,t)},jsxDom:p.jsxDom,document:document,dimensions:{width:s,height:c}},t))},n.prototype.openContainer=function(e){var n=this;return l.ZalgoPromise.try(function(){var t;if(!(t=e?(0,p.getElement)(e):document.body))throw new Error("Could not find element to open container into");if(n.component.containerTemplate){var r=n.renderTemplate(n.component.containerTemplate,{container:t});if(n.container=r,(0,p.hideElement)(n.container),(0,p.appendChild)(t,n.container),n.driver.renderedIntoContainerTemplate){if(n.element=n.getOutlet(),(0,p.hideElement)(n.element),!n.element)throw new Error("Could not find element to render component into");(0,p.hideElement)(n.element)}n.clean.register("destroyContainerTemplate",function(){n.container&&n.container.parentNode&&n.container.parentNode.removeChild(n.container),delete n.container})}else if(n.driver.renderedIntoContainerTemplate)throw new Error("containerTemplate needed to render "+n.context)})},n.prototype.cancelContainerEvents=function(){this.clean.run("destroyContainerEvents")},n.prototype.destroy=function(){var e=this;return l.ZalgoPromise.try(function(){if(e.clean.hasTasks())return e.component.log("destroy"),(0,a.flush)(),e.clean.all()})},n.prototype.tryInit=function(e){var n=this;return l.ZalgoPromise.try(e).catch(function(e){n.onInit.reject(e)}).then(function(){return n.onInit})},n.prototype.error=function(e){var n=this;return l.ZalgoPromise.try(function(){if(n.handledErrors=n.handledErrors||[],-1===n.handledErrors.indexOf(e))return n.handledErrors.push(e),n.onInit.reject(e),n.destroy()}).then(function(){if(n.props.onError)return n.props.onError(e)}).catch(function(n){throw new Error("An error was encountered while handling error:\n\n "+(0,p.stringifyError)(e)+"\n\n"+(0,p.stringifyError)(n))}).then(function(){if(!n.props.onError)throw e})},n.destroyAll=function(){for(var e=[];n.activeComponents.length;)e.push(n.activeComponents[0].destroy());return l.ZalgoPromise.all(e).then(p.noop)},s(n,[{key:"driver",get:function(){if(!this.context)throw new Error("Context not set");return g.RENDER_DRIVERS[this.context]}}]),n}(d.BaseComponent)).prototype,"getOutlet",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"getOutlet"),r.prototype),v(r.prototype,"prefetch",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"prefetch"),r.prototype),v(r.prototype,"loadHTML",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"loadHTML"),r.prototype),v(r.prototype,"buildUrl",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"buildUrl"),r.prototype),v(r.prototype,"open",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"open"),r.prototype),v(r.prototype,"openPrerender",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"openPrerender"),r.prototype),v(r.prototype,"switchPrerender",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"switchPrerender"),r.prototype),v(r.prototype,"close",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"close"),r.prototype),v(r.prototype,"closeContainer",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"closeContainer"),r.prototype),v(r.prototype,"destroyContainer",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"destroyContainer"),r.prototype),v(r.prototype,"closeComponent",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"closeComponent"),r.prototype),v(r.prototype,"showContainer",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"showContainer"),r.prototype),v(r.prototype,"showComponent",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"showComponent"),r.prototype),v(r.prototype,"hideContainer",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"hideContainer"),r.prototype),v(r.prototype,"hideComponent",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"hideComponent"),r.prototype),v(r.prototype,"createPrerenderTemplate",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"createPrerenderTemplate"),r.prototype),v(r.prototype,"openContainer",[p.memoized],Object.getOwnPropertyDescriptor(r.prototype,"openContainer"),r.prototype),r)).activeComponents=[]},"./src/component/parent/props.js":function(e,n,t){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.normalizeProp=s,n.normalizeProps=function(e,n,t){var r={};t=t||{};var o=Object.keys(t),i=Array.isArray(o),a=0;for(o=i?o:o[Symbol.iterator]();;){var c;if(i){if(a>=o.length)break;c=o[a++]}else{if((a=o.next()).done)break;c=a.value}var u=c;-1!==e.getPropNames().indexOf(u)?r[u]=s(e,n,t,u,t[u]):r[u]=t[u]}var l=e.getPropNames(),d=Array.isArray(l),f=0;for(l=d?l:l[Symbol.iterator]();;){var p;if(d){if(f>=l.length)break;p=l[f++]}else{if((f=l.next()).done)break;p=f.value}var m=p;if(!(t.hasOwnProperty(m)||n.props&&n.props.hasOwnProperty(m))){var h=s(e,n,t,m,t[m]);void 0!==h&&(r[m]=h)}}return r},n.propsToQuery=function(e,n){var t={};return o.ZalgoPromise.all(Object.keys(n).map(function(s){var a=e[s];if(a)return o.ZalgoPromise.resolve().then(function(){var e=n[s];if(e&&a.queryParam)return e}).then(function(e){if(e)return o.ZalgoPromise.all([function(e,n,t){return o.ZalgoPromise.try(function(){return"function"==typeof e.queryParam?e.queryParam(t):"string"==typeof e.queryParam?e.queryParam:n})}(a,s,e),function(e,n,t){return o.ZalgoPromise.try(function(){return"function"==typeof e.queryValue?e.queryValue(t):t})}(a,0,e)]).then(function(e){var n=e[0],o=e[1],c=void 0;if("boolean"==typeof o)c="1";else if("string"==typeof o)c=o.toString();else{if("function"==typeof o)return;if("object"===(void 0===o?"undefined":r(o))&&null!==o){if("json"!==a.serialization){c=(0,i.dotify)(o,s);var u=Object.keys(c),l=Array.isArray(u),d=0;for(u=l?u:u[Symbol.iterator]();;){var f;if(l){if(d>=u.length)break;f=u[d++]}else{if((d=u.next()).done)break;f=d.value}var p=f;t[p]=c[p]}return}c=JSON.stringify(o)}else"number"==typeof o&&(c=o.toString())}t[n]=c})})})).then(function(){return t})};var o=t("./node_modules/zalgo-promise/src/index.js"),i=t("./src/lib/index.js");function s(e,n,t,r,o){var s=e.getProp(r),a=void 0;!(a=s.value?s.value:!s.def||t.hasOwnProperty(r)&&function(e){return null!=e&&""!==e}(o)?o:s.def.call(e,t))&&s.alias&&t[s.alias]&&(a=t[s.alias]);var c=!1;s.decorate&&null!=a&&(a=s.decorate.call(n,a,t),c=!0);var u=s.type;if("boolean"===u)a=Boolean(a);else if("function"===u){if(!a&&s.noop&&(a=i.noop,!c&&s.decorate&&(a=s.decorate.call(n,i.noop,t))),a&&"function"==typeof a){a=a.bind(n),s.denodeify&&(a=(0,i.denodeify)(a)),s.promisify&&(a=(0,i.promisify)(a));var l=a;a=function(){return e.log("call_prop_"+r),l.apply(this,arguments)},s.once&&(a=(0,i.once)(a)),s.memoize&&(a=(0,i.memoize)(a))}}else"string"===u||"object"===u||"number"===u&&void 0!==a&&(a=parseInt(a,10));return a}},"./src/component/parent/validate.js":function(e,n,t){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,n,t,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(null!=t&&""!==t){if(!t||"function"!=typeof t.then||!e.promise){if("function"===e.type){if("function"!=typeof t)throw new TypeError("Prop is not of type function: "+n)}else if("string"===e.type){if("string"!=typeof t)throw new TypeError("Prop is not of type string: "+n)}else if("object"===e.type)try{JSON.stringify(t)}catch(e){throw new Error("Unable to serialize prop: "+n)}else if("number"===e.type&&isNaN(parseInt(t,10)))throw new TypeError("Prop is not a number: "+n);"function"==typeof e.validate&&t&&e.validate(t,r)}}else if(o&&!1!==e.required&&!e.hasOwnProperty("def"))throw new Error("Prop is required: "+n)}n.validateProp=o,n.validateProps=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if((n=n||{}).env&&"object"===r(e.url)&&!e.url[n.env])throw new Error("Invalid env: "+n.env);var i=e.getPropNames(),s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var c;if(s){if(a>=i.length)break;c=i[a++]}else{if((a=i.next()).done)break;c=a.value}var u=c,l=e.getProp(u);if(l.alias&&n.hasOwnProperty(l.alias)){var d=n[l.alias];delete n[l.alias],n[u]||(n[u]=d)}}var f=Object.keys(n),p=Array.isArray(f),m=0;for(f=p?f:f[Symbol.iterator]();;){var h;if(p){if(m>=f.length)break;h=f[m++]}else{if((m=f.next()).done)break;h=m.value}var g=h,w=e.getProp(g),y=n[g];w&&o(w,g,y,n,t)}var v=e.getPropNames(),b=Array.isArray(v),E=0;for(v=b?v:v[Symbol.iterator]();;){var _;if(b){if(E>=v.length)break;_=v[E++]}else{if((E=v.next()).done)break;_=E.value}var S=_,O=e.getProp(S),T=n[S];O&&!n.hasOwnProperty(S)&&o(O,S,T,n,t)}}},"./src/component/window.js":function(e,n,t){"use strict";n.__esModule=!0,n.getParentRenderWindow=n.getParentComponentWindow=n.getComponentMeta=n.isZoidComponentWindow=void 0,n.buildChildWindowName=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.id=(0,s.uniqueID)(),t.domain=(0,o.getDomain)(window);var r,a=c(e),u=c(n),l=(r=JSON.stringify(t),i.default.encode(r).replace(/\=/g,"").toLowerCase());if(!a)throw new Error("Invalid name: "+e+" - must contain alphanumeric characters");if(!u)throw new Error("Invalid version: "+n+" - must contain alphanumeric characters");return["xcomponent",a,u,l,""].join("__")},n.getParentDomain=function(){return u().domain},n.getPosition=function(e){var n=e.width,t=e.height,r=0,o=0;return n&&(window.outerWidth?r=Math.round((window.outerWidth-n)/2)+window.screenX:window.screen.width&&(r=Math.round((window.screen.width-n)/2))),t&&(window.outerHeight?o=Math.round((window.outerHeight-t)/2)+window.screenY:window.screen.height&&(o=Math.round((window.screen.height-t)/2))),{x:r,y:o}};var r,o=t("./node_modules/cross-domain-utils/src/index.js"),i=(r=t("./node_modules/hi-base32/src/base32.js"))&&r.__esModule?r:{default:r},s=t("./src/lib/index.js"),a=t("./src/constants.js");function c(e){return e.replace(/^[^a-z0-9A-Z]+|[^a-z0-9A-Z]+$/g,"").replace(/[^a-z0-9A-Z]+/g,"_")}n.isZoidComponentWindow=(0,s.memoize)(function(){return!!window.name&&"xcomponent"===window.name.split("__")[0]});var u=n.getComponentMeta=(0,s.memoize)(function(){if(!window.name)throw new Error("Can not get component meta without window name");var e=window.name.split("__"),n=e[0],t=e[1],r=e[2],o=e[3];if("xcomponent"!==n)throw new Error("Window not rendered by zoid - got "+n);var a,c=void 0;try{c=JSON.parse((a=o,i.default.decode(a.toUpperCase())))}catch(e){throw new Error("Can not decode component-meta: "+o+" "+(0,s.stringifyError)(e))}return c.name=t,c.version=r.replace(/_/g,"."),c});function l(e){var n=e.ref,t=e.uid,r=e.distance,i=void 0;if(n===a.WINDOW_REFERENCES.OPENER?i=(0,o.getOpener)(window):n===a.WINDOW_REFERENCES.TOP?i=(0,o.getTop)(window):n===a.WINDOW_REFERENCES.PARENT&&(i=r?(0,o.getNthParentFromTop)(window,r):(0,o.getParent)(window)),n===a.WINDOW_REFERENCES.GLOBAL){var c=(0,o.getAncestor)(window);if(c){var u=(0,o.getAllFramesInWindow)(c),l=Array.isArray(u),d=0;for(u=l?u:u[Symbol.iterator]();;){var f;if(l){if(d>=u.length)break;f=u[d++]}else{if((d=u.next()).done)break;f=d.value}var p=f,m=(0,s.globalFor)(p);if(m&&m.windows&&m.windows[t]){i=m.windows[t];break}}}}if(!i)throw new Error("Unable to find window by ref");return i}n.getParentComponentWindow=(0,s.memoize)(function(){var e=u();if(!e)throw new Error("Can not get parent component window - window not rendered by zoid");return l(e.componentParent)}),n.getParentRenderWindow=(0,s.memoize)(function(){var e=u();if(!e)throw new Error("Can not get parent component window - window not rendered by zoid");return l(e.renderParent)})},"./src/constants.js":function(e,n,t){"use strict";n.__esModule=!0;var r=n.ZOID="zoid",o=(n.__ZOID__="__"+r+"__",n.POST_MESSAGE={INIT:r+"_init",PROPS:r+"_props",PROP_CALLBACK:r+"_prop_callback",CLOSE:r+"_close",CHECK_CLOSE:r+"_check_close",REDIRECT:r+"_redirect",RESIZE:r+"_resize",ONRESIZE:r+"_onresize",DELEGATE:r+"_delegate",ALLOW_DELEGATE:r+"_allow_delegate",ERROR:r+"_error",HIDE:r+"_hide",SHOW:r+"_show"},n.PROP_TYPES={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number"}),i=(n.INITIAL_PROPS={RAW:"raw",UID:"uid"},n.WINDOW_REFERENCES={OPENER:"opener",TOP:"top",PARENT:"parent",GLOBAL:"global"},n.PROP_TYPES_LIST=Object.keys(o).map(function(e){return o[e]}),n.CONTEXT_TYPES={IFRAME:"iframe",POPUP:"popup"});n.CLASS_NAMES={ZOID:""+r,OUTLET:r+"-outlet",COMPONENT_FRAME:r+"-component-frame",PRERENDER_FRAME:r+"-prerender-frame",VISIBLE:r+"-visible",INVISIBLE:r+"-invisible"},n.EVENTS={CLOSE:r+"-close"},n.ATTRIBUTES={IFRAME_PLACEHOLDER:"data-zoid-"+r+"-placeholder"},n.ANIMATION_NAMES={SHOW_CONTAINER:r+"-show-container",SHOW_COMPONENT:r+"-show-component",HIDE_CONTAINER:r+"-hide-container",HIDE_COMPONENT:r+"-hide-component"},n.EVENT_NAMES={CLICK:"click"},n.CLOSE_REASONS={PARENT_CALL:"parent_call",CHILD_CALL:"child_call",CLOSE_DETECTED:"close_detected",USER_CLOSED:"user_closed",PARENT_CLOSE_DETECTED:"parent_close_detected"},n.CONTEXT_TYPES_LIST=Object.keys(i).map(function(e){return i[e]}),n.DELEGATE={CALL_ORIGINAL:"call_original",CALL_DELEGATE:"call_delegate"},n.WILDCARD="*",n.DEFAULT_DIMENSIONS={WIDTH:300,HEIGHT:150}},"./src/drivers/angular.js":function(e,n,t){"use strict";n.__esModule=!0,n.angular=void 0;var r=t("./src/lib/index.js");n.angular={global:function(){return window.angular},register:function(e,n){return n.module(e.tag,[]).directive((0,r.dasherizeToCamel)(e.tag),function(){var n={},t=e.getPropNames(),o=Array.isArray(t),i=0;for(t=o?t:t[Symbol.iterator]();;){var s;if(o){if(i>=t.length)break;s=t[i++]}else{if((i=t.next()).done)break;s=i.value}n[s]="="}return e.looseProps&&(n.props="="),{scope:n,restrict:"E",controller:["$scope","$element",function(t,o){if(e.looseProps&&!t.props)throw new Error("For angular bindings to work, prop definitions must be passed to zoid.create");e.log("instantiate_angular_component");var i=function(){var e=void 0;if(t.props)e=t.props;else{e={};var o=Object.keys(n),i=Array.isArray(o),s=0;for(o=i?o:o[Symbol.iterator]();;){var a;if(i){if(s>=o.length)break;a=o[s++]}else{if((s=o.next()).done)break;a=s.value}var c=a;void 0!==t[c]&&(e[c]=t[c])}}return(0,r.replaceObject)(e,{function:function(e){return function(){var n=e.apply(this,arguments);return function(){if("$apply"!==t.$root.$$phase&&"$digest"!==t.$root.$$phase)try{t.$apply()}catch(e){}}(),n}}})},s=e.init(i(),null,o[0]);s.render(o[0]),t.$watch(function(){s.updateProps(i())})}]}})}}},"./src/drivers/angular2.js":function(e,n,t){"use strict";n.__esModule=!0,n.angular2=void 0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o=t("./src/lib/index.js");n.angular2={global:function(){},register:function(e,n){var t=n.Component,i=n.NgModule,s=n.ElementRef,a=n.NgZone;e.log("initializing angular2 component");var c=function(e){return(0,o.replaceObject)(r({},e.internalProps,e.props),{function:function(n){if("function"==typeof n)return function(){var t=this,r=arguments;return e.zone.run(function(){return n.apply(t,r)})}}})},u=t({selector:e.tag,template:"<div></div>",inputs:["props"]}).Class({constructor:[s,a,function(e,n){this.elementRef=e,this.zone=n}],ngOnInit:function(){var n=this.elementRef.nativeElement,t=e.init(c(this),null,n);t.render(n),this.parent=t},ngOnChanges:function(){this.parent&&this.parent.updateProps(c(this))}});return i({declarations:[u],exports:[u]}).Class({constructor:function(){}})}}},"./src/drivers/ember.js":function(e,n,t){"use strict"},"./src/drivers/glimmer.js":function(e,n,t){"use strict";n.__esModule=!0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};n.glimmer={global:function(){},register:function(e,n){return function(n){function t(){return function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,n.apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(t,n),t.prototype.didInsertElement=function(){e.render(r({},this.args),this.element)},t}(n)}}},"./src/drivers/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./src/drivers/script.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./src/drivers/react.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/drivers/vue.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./src/drivers/angular.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var a=t("./src/drivers/ember.js");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var c=t("./src/drivers/glimmer.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})});var u=t("./src/drivers/angular2.js");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})})},"./src/drivers/react.js":function(e,n,t){"use strict";n.__esModule=!0,n.react=void 0;var r=t("./src/lib/index.js");n.react={global:function(){if(window.React&&window.ReactDOM)return{React:window.React,ReactDOM:window.ReactDOM}},register:function(e,n){var t=n.React,o=n.ReactDOM;return t.createClass?e.react=t.createClass({render:function(){return t.createElement("div",null)},componentDidMount:function(){e.log("instantiate_react_component");var n=o.findDOMNode(this),t=e.init((0,r.extend)({},this.props),null,n);this.setState({parent:t}),t.render(n)},componentDidUpdate:function(){this.state&&this.state.parent&&this.state.parent.updateProps((0,r.extend)({},this.props))}}):e.react=function(n){function i(){return function(e,n){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),function(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}(this,n.apply(this,arguments))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}(i,n),i.prototype.render=function(){return t.createElement("div",null)},i.prototype.componentDidMount=function(){e.log("instantiate_react_component");var n=o.findDOMNode(this),t=e.init((0,r.extend)({},this.props),null,n);this.setState({parent:t}),t.render(n)},i.prototype.componentDidUpdate=function(){this.state&&this.state.parent&&this.state.parent.updateProps((0,r.extend)({},this.props))},i}(t.Component),e.react}}},"./src/drivers/script.js":function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var script=exports.script={global:function(){return window.document},register:function register(component,document){function render(element){if(element&&element.tagName&&"script"===element.tagName.toLowerCase()&&element.attributes.type&&"application/x-component"===element.attributes.type.value&&element.parentNode){var tag=element.getAttribute("data-component");if(tag&&tag===component.tag){component.log("instantiate_script_component");var props=element.innerText?eval("("+element.innerText+")"):{},container=document.createElement("div");if(!element.parentNode)throw new Error("Element has no parent");element.parentNode.replaceChild(container,element),component.render(props,container)}}}function scan(){var e=Array.prototype.slice.call(document.getElementsByTagName("script")),n=Array.isArray(e),t=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(t>=e.length)break;r=e[t++]}else{if((t=e.next()).done)break;r=t.value}render(r)}}scan(),document.addEventListener("DOMContentLoaded",scan),window.addEventListener("load",scan),document.addEventListener("DOMNodeInserted",function(e){render(e.target)})}}},"./src/drivers/vue.js":function(e,n,t){"use strict";n.__esModule=!0,n.vue=void 0;var r=t("./src/lib/index.js");n.vue={global:function(){},register:function(e){return{render:function(e){return e("div")},inheritAttrs:!1,mounted:function(){var n=this.$el;this.parent=e.init((0,r.extend)({},this.$attrs),null,n),this.parent.render(n)},beforeUpdate:function(){this.parent&&this.$attrs&&this.parent.updateProps((0,r.extend)({},this.$attrs))}}}}},"./src/error.js":function(e,n,t){"use strict";function r(e){this.message=e}function o(e){this.message=e}function i(e){this.message=e}n.__esModule=!0,n.PopupOpenError=r,n.IntegrationError=o,n.RenderError=i,r.prototype=Object.create(Error.prototype),o.prototype=Object.create(Error.prototype),i.prototype=Object.create(Error.prototype)},"./src/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./src/interface.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(r);n.default=o},"./src/interface.js":function(e,n,t){"use strict";n.__esModule=!0,n.CONSTANTS=n.postRobot=n.getCurrentScriptDir=void 0,n.create=function(e){return new s.Component(e)},n.getByTag=function(e){return s.Component.getByTag(e)};var r=t("./src/lib/index.js");Object.defineProperty(n,"getCurrentScriptDir",{enumerable:!0,get:function(){return r.getCurrentScriptDir}}),n.destroyAll=function(){return a.ParentComponent.destroyAll()};var o=t("./src/error.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})}),t("./node_modules/zalgo-promise/src/index.js");var i=u(t("./node_modules/post-robot/src/index.js")),s=t("./src/component/index.js"),a=t("./src/component/parent/index.js"),c=u(t("./src/constants.js"));function u(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}n.postRobot=i,n.CONSTANTS=c},"./src/lib/css.js":function(e,n,t){"use strict";function r(e){return"string"==typeof e&&/^[0-9]+%$/.test(e)}function o(e){return"string"==typeof e&&/^[0-9]+px$/.test(e)}function i(e){if("number"==typeof e)return e;var n=e.match(/^([0-9]+)(px|%)$/);if(!n)throw new Error("Could not match css value from "+e);return parseInt(n[1],10)}function s(e){return i(e)+"px"}function a(e,n){return parseInt(e*i(n)/100,10)}n.__esModule=!0,n.isPerc=r,n.isPx=o,n.toNum=i,n.toPx=s,n.toCSS=function(e){return"number"==typeof e?s(e):r(e)?e:s(e)},n.percOf=a,n.normalizeDimension=function(e,n){if("number"==typeof e)return e;if(r(e))return a(n,e);if(o(e))return i(e);throw new Error("Can not normalize dimension: "+e)}},"./src/lib/decorators.js":function(e,n,t){"use strict";n.__esModule=!0,n.memoized=function(e,n,t){var r=t.value;t.value=function(){return this.__memoized__=this.__memoized__||{},this.__memoized__.hasOwnProperty(n)||(this.__memoized__[n]=r.apply(this,arguments)),this.__memoized__[n]},t.value.displayName=n+":memoized"},n.promise=function(e,n,t){var o=t.value;t.value=function(){return r.ZalgoPromise.try(o,this,arguments)},t.value.displayName=n+":promisified"};var r=t("./node_modules/zalgo-promise/src/index.js")},"./src/lib/dom.js":function(e,n,t){"use strict";n.__esModule=!0,n.parseQuery=n.documentReady=void 0;var r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.appendChild=d,n.querySelectorAll=f,n.getElementSafe=p,n.getElement=m,n.isDocumentReady=h,n.elementReady=function(e){return new s.ZalgoPromise(function(n,t){var r=(0,l.stringify)(e),o=p(e);if(o)return n(o);if(h())return t(new Error("Document is ready and element "+r+" does not exist"));var i=setInterval(function(){return(o=p(e))?(clearInterval(i),n(o)):h()?(clearInterval(i),t(new Error("Document is ready and element "+r+" does not exist"))):void 0},10)})},n.popup=function(e,n){var t,r=Object.keys(n).map(function(e){if(n[e])return e+"="+(0,l.stringify)(n[e])}).filter(Boolean).join(","),o=void 0;try{o=window.open(e,n.name,r,!0)}catch(t){throw new c.PopupOpenError("Can not open popup window - "+(t.stack||t.message))}if((0,i.isWindowClosed)(o))throw new c.PopupOpenError("Can not open popup window - blocked");return o},n.writeToWindow=g,n.writeElementToWindow=w,n.setStyle=y,n.createElement=v,n.awaitFrameLoad=E,n.awaitFrameWindow=function(e){return e.contentWindow?s.ZalgoPromise.resolve(e.contentWindow):E(e).then(function(e){if(!e.contentWindow)throw new Error("Could not find window in iframe");return e.contentWindow})},n.iframe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=m(arguments[1]),t=e.attributes||{},o=e.style||{},i=v("iframe",{attributes:r({frameBorder:"0",allowTransparency:"true"},t),style:r({backgroundColor:"transparent"},o),html:e.html,class:e.class});return E(i),n.appendChild(i),(e.url||window.navigator.userAgent.match(/MSIE|Edge/i))&&i.setAttribute("src",e.url||"about:blank"),i},n.addEventListener=function(e,n,t){return e.addEventListener(n,t),{cancel:function(){e.removeEventListener(n,t)}}},n.scanForJavascript=function(e){if(!e)return e;if(e.match(/<script|on\w+\s*=|javascript:|expression\s*\(|eval\(|new\s*Function/))throw new Error("HTML contains potential javascript: "+e);return e},n.getQueryParam=function(e){return _(window.location.search.slice(1))[e]},n.formatQuery=S,n.extendQuery=O,n.extendUrl=function(e){var n,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.query||{},o=t.hash||{},i=void 0,s=e.split("#");i=s[0],n=s[1];var a=i.split("?");i=a[0];var c=O(a[1],r),u=O(n,o);return c&&(i=i+"?"+c),u&&(i=i+"#"+u),i},n.elementStoppedMoving=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;return new s.ZalgoPromise(function(t,r){var o=m(e),i=o.getBoundingClientRect(),s=void 0,a=void 0;s=setInterval(function(){var e=o.getBoundingClientRect();if(i.top===e.top&&i.bottom===e.bottom&&i.left===e.left&&i.right===e.right&&i.width===e.width&&i.height===e.height)return clearTimeout(a),clearInterval(s),t();i=e},50),a=setTimeout(function(){clearInterval(s),r(new Error("Timed out waiting for element to stop animating after "+n+"ms"))},n)})},n.getCurrentDimensions=T,n.changeStyle=function(e,n){return new s.ZalgoPromise(function(t){var r=Object.keys(n),o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s;e.style[a]=n[a]}setTimeout(t,1)})},n.setOverflow=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",t=e.style,r=t.overflow,o=t.overflowX,i=t.overflowY;return e.style.overflow=e.style.overflowX=e.style.overflowY=n,{reset:function(){e.style.overflow=r,e.style.overflowX=o,e.style.overflowY=i}}},n.trackDimensions=P,n.onDimensionsChange=function(e,n){var t=n.width,r=void 0===t||t,o=n.height,i=void 0===o||o,a=n.delay,c=void 0===a?50:a,l=n.threshold,d=void 0===l?0:l;return new s.ZalgoPromise(function(n){var t=P(e,{width:r,height:i,threshold:d}),o=void 0,s=(0,u.debounce)(function(e){return clearInterval(o),n(e)},4*c);o=setInterval(function(){var e=t.check(),n=e.changed,r=e.dimensions;if(n)return t.reset(),s(r)},c),window.addEventListener("resize",function e(){var n=t.check(),r=n.changed,o=n.dimensions;r&&(t.reset(),window.removeEventListener("resize",e),s(o))})})},n.dimensionsMatchViewport=function(e,n){var t=n.width,r=n.height,o=T(e);return(!t||o.width===window.innerWidth)&&(!r||o.height===window.innerHeight)},n.bindEvents=A,n.setVendorCSS=j,n.animate=D,n.makeElementVisible=function(e){e.style.setProperty("visibility","")},n.makeElementInvisible=function(e){e.style.setProperty("visibility",R.VISIBILITY.HIDDEN,R.IMPORTANT)},n.showElement=M,n.hideElement=k,n.destroyElement=function(e){e.parentNode&&e.parentNode.removeChild(e)},n.showAndAnimate=function(e,n,t){var r=D(e,n,t);return M(e),r},n.animateAndHide=function(e,n,t){return D(e,n,t).then(function(){k(e)})},n.addClass=function(e,n){e.classList?e.classList.add(n):-1===e.className.split(/\s+/).indexOf(n)&&(e.className+=" "+n)},n.removeClass=function(e,n){e.classList?e.classList.remove(n):-1!==e.className.split(/\s+/).indexOf(n)&&(e.className=e.className.replace(n,""))},n.getCurrentScriptDir=function(){return console.warn("Do not use zoid.getCurrentScriptDir() in production -- browser support is limited"),document.currentScript?document.currentScript.src.split("/").slice(0,-1).join("/"):"."},n.getElementName=function(e){if("string"==typeof e)return e;if(!e||!e.tagName)return"<unknown>";var n=e.tagName.toLowerCase();return e.id?n+="#"+e.id:e.className&&(n+="."+e.className.split(" ").join(".")),n},n.isElementClosed=W,n.watchElementForClose=function(e,n){n=(0,u.once)(n);var t=void 0;return W(e)?n():t=(0,l.safeInterval)(function(){W(e)&&(t.cancel(),n())},50),{cancel:function(){t&&t.cancel()}}},n.getHttpType=G,n.getHTML=F,n.getCSS=function(e){return G("text/css",e)},n.getScript=function(e){return G("*/*",e)},n.prefetchPage=function(e){return F(e)},n.fixScripts=B,n.jsxDom=function(e,n,t){e=e.toLowerCase();var r=this&&this.createElement?this:window.document,i=r.createElement(e);for(var s in n)s in z?i.addEventListener(z[s],n[s]):"innerHTML"===s?(i.innerHTML=n[s],B(i,r)):i.setAttribute(s,n[s]);if("style"===e){if("string"!=typeof t)throw new TypeError("Expected "+e+" tag content to be string, got "+(void 0===t?"undefined":o(t)));if(arguments.length>3)throw new Error("Expected only text content for "+e+" tag");y(i,t,r)}else if("iframe"===e){if(arguments.length>3)throw new Error("Expected only single child node for iframe");i.addEventListener("load",function(){var e=i.contentWindow;if(!e)throw new Error("Expected frame to have contentWindow");"string"==typeof t?g(e,t):w(e,t)})}else if("script"===e){if("string"!=typeof t)throw new TypeError("Expected "+e+" tag content to be string, got "+(void 0===t?"undefined":o(t)));if(arguments.length>3)throw new Error("Expected only text content for "+e+" tag");i.text=t}else for(var a=2;a<arguments.length;a++)if("string"==typeof arguments[a]){var c=document.createTextNode(arguments[a]);d(i,c)}else d(i,arguments[a]);return i};var i=t("./node_modules/cross-domain-utils/src/index.js"),s=t("./node_modules/zalgo-promise/src/index.js"),a=t("./node_modules/cross-domain-safe-weakmap/src/index.js"),c=t("./src/error.js"),u=t("./src/lib/fn.js"),l=t("./src/lib/util.js");function d(e,n){e.appendChild(n)}function f(e,n){return Array.prototype.slice.call(e.querySelectorAll(n))}function p(e){if(function(e){return e instanceof window.Element||null!==e&&"object"===(void 0===e?"undefined":o(e))&&1===e.nodeType&&"object"===o(e.style)&&"object"===o(e.ownerDocument)}(e))return e;if("string"==typeof e){var n=document.getElementById(e);if(n)return n;if(document.querySelector&&(n=document.querySelector(e)),n)return n}}function m(e){var n=p(e);if(n)return n;throw new Error("Can not find element: "+(0,l.stringify)(e))}function h(){return"complete"===window.document.readyState}function g(e,n){try{e.document.open(),e.document.write(n),e.document.close()}catch(t){try{e.location="javascript: document.open(); document.write("+JSON.stringify(n)+"); document.close();"}catch(e){}}}function w(e,n){var t=n.tagName.toLowerCase();if("html"!==t)throw new Error("Expected element to be html, got "+t);for(var r=e.document.documentElement;r.children&&r.children.length;)r.removeChild(r.children[0]);for(;n.children.length;)r.appendChild(n.children[0])}function y(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.document;e.styleSheet?e.styleSheet.cssText=n:e.appendChild(t.createTextNode(n))}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2];e=e.toLowerCase();var r=document.createElement(e);if(n.style&&(0,l.extend)(r.style,n.style),n.class&&(r.className=n.class.join(" ")),n.attributes){var o=Object.keys(n.attributes),i=Array.isArray(o),s=0;for(o=i?o:o[Symbol.iterator]();;){var a;if(i){if(s>=o.length)break;a=o[s++]}else{if((s=o.next()).done)break;a=s.value}var c=a;r.setAttribute(c,n.attributes[c])}}if(n.styleSheet&&y(r,n.styleSheet),t&&d(t,r),n.html)if("iframe"===e){if(!t||!r.contentWindow)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");g(r.contentWindow,n.html)}else r.innerHTML=n.html;return r}n.documentReady=new s.ZalgoPromise(function(e){if("complete"===window.document.readyState)return e(window.document);var n=setInterval(function(){if("complete"===window.document.readyState)return clearInterval(n),e(window.document)},10)});var b=new a.WeakMap;function E(e){if(b.has(e)){var n=b.get(e);if(n)return n}var t=new s.ZalgoPromise(function(n,t){e.addEventListener("load",function(){(0,i.linkFrameWindow)(e),n(e)}),e.addEventListener("error",function(r){e.contentWindow?n(e):t(r)})});return b.set(e,t),t}var _=n.parseQuery=(0,u.memoize)(function(e){var n={};if(!e)return n;if(-1===e.indexOf("="))throw new Error("Can not parse query string params: "+e);var t=e.split("&"),r=Array.isArray(t),o=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i;(s=s.split("="))[0]&&s[1]&&(n[decodeURIComponent(s[0])]=decodeURIComponent(s[1]))}return n});function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter(function(n){return"string"==typeof e[n]}).map(function(n){return(0,l.urlEncode)(n)+"="+(0,l.urlEncode)(e[n])}).join("&")}function O(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n&&Object.keys(n).length?S(r({},_(e),n)):e}function T(e){return{width:e.offsetWidth,height:e.offsetHeight}}function P(e,n){var t=n.width,r=void 0===t||t,o=n.height,i=void 0===o||o,s=n.threshold,a=void 0===s?0:s,c=T(e);return{check:function(){var n=T(e);return{changed:function(e,n,t){var r=t.width,o=t.height,i=void 0===o||o,s=t.threshold,a=void 0===s?0:s;return!!((void 0===r||r)&&Math.abs(e.width-n.width)>a)||!!(i&&Math.abs(e.height-n.height)>a)}(c,n,{width:r,height:i,threshold:a}),dimensions:n}},reset:function(){c=T(e)}}}function A(e,n,t){t=(0,u.once)(t);var r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s;e.addEventListener(a,t)}return{cancel:(0,u.once)(function(){var r=n,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var a=s;e.removeEventListener(a,t)}})}}var C=["webkit","moz","ms","o"];function j(e,n,t){e.style[n]=t;var r=(0,l.capitalizeFirstLetter)(n),o=C,i=Array.isArray(o),s=0;for(o=i?o:o[Symbol.iterator]();;){var a;if(i){if(s>=o.length)break;a=o[s++]}else{if((s=o.next()).done)break;a=s.value}var c=a;e.style[""+c+r]=t}}var x=window.CSSRule,L=x.KEYFRAMES_RULE||x.WEBKIT_KEYFRAMES_RULE||x.MOZ_KEYFRAMES_RULE||x.O_KEYFRAMES_RULE||x.MS_KEYFRAMES_RULE,N=["animationstart","webkitAnimationStart","oAnimationStart","MSAnimationStart"],I=["animationend","webkitAnimationEnd","oAnimationEnd","MSAnimationEnd"];function D(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return new s.ZalgoPromise(function(o,i){var s=m(e);if(!s||!function(e,n){var t=s.ownerDocument.styleSheets;try{for(var r=0;r<t.length;r++){var o=t[r].cssRules;if(o)for(var i=0;i<o.length;i++){var a=o[i];if(a&&a.type===L&&a.name===n)return!0}}}catch(e){return!1}return!1}(0,n))return o();var a=!1,c=void 0,u=void 0,l=void 0,d=void 0;function f(){j(s,"animationName",""),clearTimeout(c),clearTimeout(u),l.cancel(),d.cancel()}l=A(s,N,function(e){e.target===s&&e.animationName===n&&(clearTimeout(c),e.stopPropagation(),l.cancel(),a=!0,u=setTimeout(function(){f(),o()},r))}),d=A(s,I,function(e){if(e.target===s&&e.animationName===n)return f(),"string"==typeof e.animationName&&e.animationName!==n?i("Expected animation name to be "+n+", found "+e.animationName):o()}),j(s,"animationName",n),c=setTimeout(function(){if(!a)return f(),o()},200),t&&t(f)})}var R={DISPLAY:{NONE:"none",BLOCK:"block"},VISIBILITY:{VISIBLE:"visible",HIDDEN:"hidden"},IMPORTANT:"important"};function M(e){e.style.setProperty("display","")}function k(e){e.style.setProperty("display",R.DISPLAY.NONE,R.IMPORTANT)}function W(e){return!e||!e.parentNode}function G(e,n){return new s.ZalgoPromise(function(t,r){var o=new window.XMLHttpRequest;o.open("GET",n),o.setRequestHeader("Accept",e),o.send(null),o.onload=function(){t(o.responseText)},o.onerror=function(){return r(new Error("prefetch failed"))}})}function F(e){return G("text/html",e)}var z={onClick:"click"};function B(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,t=f(e,"script"),r=Array.isArray(t),o=0;for(t=r?t:t[Symbol.iterator]();;){var i;if(r){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i,a=n.createElement("script");a.text=s.textContent,s.parentNode.replaceChild(a,s)}}},"./src/lib/fn.js":function(e,n,t){"use strict";n.__esModule=!0,n.noop=function(){},n.once=function(e){var n=!1,t=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return n?t:(n=!0,t=e.apply(this,arguments))}},n.memoize=function(e){var n={};return function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var s=void 0;try{s=JSON.stringify(Array.prototype.slice.call(arguments),function(e,n){return"function"==typeof n?"zoid:memoize["+(0,r.getObjectID)(n)+"]":n})}catch(e){throw new Error("Arguments not serializable -- can not be used to memoize")}return n.hasOwnProperty(s)||(n[s]=e.apply(this,arguments)),n[s]}},n.debounce=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,t=void 0;return function(){var r=this,o=arguments;clearTimeout(t),t=setTimeout(function(){return e.apply(r,o)},n)}},n.serializeFunctions=function(e){return(0,r.replaceObject)(e,{function:function(){return{__type__:"__function__"}}})},n.deserializeFunctions=function(e,n){return(0,r.replaceObject)(e,{object:function(e,t,r){if(e&&"__function__"===e.__type__)return function(){return n({key:t,fullKey:r,self:this,args:arguments})}}})};var r=t("./src/lib/util.js")},"./src/lib/global.js":function(e,n,t){"use strict";n.__esModule=!0,n.global=void 0,n.globalFor=i,n.localGlobal=s;var r=t("./node_modules/cross-domain-utils/src/index.js"),o=t("./src/constants.js");function i(e){if((0,r.isSameDomain)(e))return e[o.__ZOID__]||(e[o.__ZOID__]={}),e[o.__ZOID__]}function s(){var e=i(window);if(!e)throw new Error("Could not get local global");return e}n.global=s()},"./src/lib/index.js":function(e,n,t){"use strict";n.__esModule=!0;var r=t("./src/lib/dom.js");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var o=t("./src/lib/fn.js");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})});var i=t("./src/lib/promise.js");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})});var s=t("./src/lib/util.js");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})});var a=t("./src/lib/css.js");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})});var c=t("./src/lib/decorators.js");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})});var u=t("./src/lib/logger.js");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})});var l=t("./src/lib/global.js");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})})},"./src/lib/logger.js":function(e,n,t){"use strict";n.__esModule=!0,n.setLogLevel=function(e){if(-1===o.logLevels.indexOf(e))throw new Error("Invalid logLevel: "+e);o.config.logLevel=e,r.CONFIG.LOG_LEVEL=e,window.LOG_LEVEL=e},n.info=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o.info)("xc_"+e+"_"+n,t)},n.warn=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o.warn)("xc_"+e+"_"+n,t)},n.error=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o.error)("xc_"+e+"_"+n,t)};var r=t("./node_modules/post-robot/src/index.js"),o=t("./node_modules/beaver-logger/client/index.js")},"./src/lib/promise.js":function(e,n,t){"use strict";n.__esModule=!0,n.denodeify=function(e){return function(){var n=this,t=Array.prototype.slice.call(arguments);return t.length>=e.length?r.ZalgoPromise.resolve(e.apply(n,t)):new r.ZalgoPromise(function(r,o){t.push(function(e,n){if(e&&!(e instanceof Error))throw new Error("Passed non-Error object in callback: [ "+e+" ] -- callbacks should either be called with callback(new Error(...)) or callback(null, result).");return e?o(e):r(n)}),e.apply(n,t)})}},n.promisify=function(e){return function(){var n=this,t=arguments;return r.ZalgoPromise.try(function(){return e.apply(n,t)})}},n.delay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new r.ZalgoPromise(function(n){setTimeout(n,e)})},n.cycle=function e(n){return r.ZalgoPromise.try(n).then(function(){return e(n)})};var r=t("./node_modules/zalgo-promise/src/index.js")},"./src/lib/util.js":function(e,n,t){"use strict";n.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function i(e,n){var t=void 0;return t=setTimeout(function r(){t=setTimeout(r,n),e.call()},n),{cancel:function(){clearTimeout(t)}}}n.urlEncode=function(e){return e.replace(/\?/g,"%3F").replace(/&/g,"%26").replace(/#/g,"%23").replace(/\+/g,"%2B")},n.camelToDasherize=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},n.dasherizeToCamel=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},n.extend=function(e,n){if(!n)return e;for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e},n.values=function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},n.uniqueID=o,n.stringifyWithFunctions=function(e){return JSON.stringify(e,function(e,n){return"function"==typeof n?n.toString():n})},n.safeGet=function(e,n){var t=void 0;try{t=e[n]}catch(e){}return t},n.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},n.get=function(e,n,t){if(!n)return t;for(var o=n.split("."),i=0;i<o.length;i++){if("object"!==(void 0===e?"undefined":r(e))||null===e)return t;e=e[o[i]]}return void 0===e?t:e},n.safeInterval=i,n.safeTimeout=function(e,n){var t=i(function(){(n-=100)<=0&&(t.cancel(),e())},100)},n.each=function(e,n){if(e)if(Array.isArray(e))for(var t=e.length,o=0;o<t;o++)n(e[o],o);else if("object"===(void 0===e?"undefined":r(e)))for(var i=Object.keys(e),s=i.length,a=0;a<s;a++){var c=i[a];n(e[c],c)}},n.replaceObject=function e(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(Array.isArray(n)){var i=function(){for(var i=n.length,s=[],a=function(i){Object.defineProperty(s,i,{configurable:!0,enumerable:!0,get:function(){var a=o?o+"."+i:""+i,c=n[i],u=void 0===c?"undefined":r(c),l=t[u];if(l){var d=l(c,i,a);if(void 0!==d)return s[i]=d,s[i]}return"object"===(void 0===c?"undefined":r(c))&&null!==c?(s[i]=e(c,t,a),s[i]):(s[i]=c,s[i])},set:function(e){delete s[i],s[i]=e}})},c=0;c<i;c++)a(c);return{v:s}}();if("object"===(void 0===i?"undefined":r(i)))return i.v}else{if("object"!==(void 0===n?"undefined":r(n))||null===n)throw new Error("Pass an object or array");var s=function(){var i={},s=function(s){if(!n.hasOwnProperty(s))return"continue";Object.defineProperty(i,s,{configurable:!0,enumerable:!0,get:function(){var a=o?o+"."+s:""+s,c=n[s],u=void 0===c?"undefined":r(c),l=t[u];if(l){var d=l(c,s,a);if(void 0!==d)return i[s]=d,i[s]}return"object"===(void 0===c?"undefined":r(c))&&null!==c?(i[s]=e(c,t,a),i[s]):(i[s]=c,i[s])},set:function(e){delete i[s],i[s]=e}})};for(var a in n)s(a);return{v:i}}();if("object"===(void 0===s?"undefined":r(s)))return s.v}},n.copyProp=function(e,n,t,r){if(e.hasOwnProperty(t)){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,o)}else n[t]=r},n.dotify=function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var i in t=t?t+".":t,n)void 0!==n[i]&&null!==n[i]&&"function"!=typeof n[i]&&(n[i]&&Array.isArray(n[i])&&n[i].length&&n[i].every(function(e){return"object"!==(void 0===e?"undefined":r(e))})?o[""+t+i]=n[i].join(","):n[i]&&"object"===r(n[i])?o=e(n[i],""+t+i,o):o[""+t+i]=n[i].toString());return o},n.getObjectID=function(e){if(null==e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e)throw new Error("Invalid object");var n=s.get(e);return n||(n=(void 0===e?"undefined":r(e))+":"+o(),s.set(e,n)),n},n.regex=a,n.regexAll=function(e,n){for(var t=[],r=0;;){var o=a(e,n,r);if(!o)break;t.push(o),r=o.end}return t},n.count=function(e,n){for(var t=0,r=0;;){var o=e.indexOf(n,t);if(-1===o)break;t=o,r+=1}return r},n.stringify=c,n.stringifyError=function(e){if(e){var n=e.stack,t=e.message;if("string"==typeof n)return n;if("string"==typeof t)return t}return c(e)},n.eventEmitter=function(){var e={},n={};return{on:function(e,t){var r=n[e]=n[e]||[];r.push(t);var o=!1;return{cancel:function(){o||(o=!0,r.splice(r.indexOf(t),1))}}},once:function(e,n){var t=this.on(e,function(){t.cancel(),n()});return t},trigger:function(e){var t=n[e];if(t){var r=t,o=Array.isArray(r),i=0;for(r=o?r:r[Symbol.iterator]();;){var s;if(o){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}s()}}},triggerOnce:function(n){e[n]||(e[n]=!0,this.trigger(n))}}};var s=new(t("./node_modules/cross-domain-safe-weakmap/src/index.js").WeakMap);function a(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"==typeof e&&(e=new RegExp(e));var r=n.slice(t).match(e);if(r){var o=r.index,i=r[0];return{text:i,groups:r.slice(1),start:t+o,end:t+o+i.length,length:i.length,replace:function(e){return i?""+i.slice(0,t+o)+e+i.slice(o+i.length):""}}}}function c(e){return"string"==typeof e?e:e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}},"./src/types.js":function(e,n,t){"use strict"}})});var HPOSLogin=zoid.create({tag:"h-pos-login",url:"https://pos.avalue.co.th/external-login",contexts:{popup:!0},dimensions:{width:"414px",height:"550px"},containerTemplate({id:e,CLASS:n,CONTEXT:t,tag:r,context:o,actions:i,outlet:s,jsxDom:a}){return a("div",{id:e,onClick:function(e){return e.preventDefault(),e.stopPropagation(),i.focus()},class:`${n.ZOID} ${n.ZOID}-tag-${r} ${n.ZOID}-context-${o} ${n.ZOID}-focus`},a("a",{href:"#",onClick:function(e){return e.preventDefault(),e.stopPropagation(),i.close()},class:`${n.ZOID}-close`}),s,a("style",null,`\n                    #${e} {\n                        position: fixed;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                        height: 100%;\n                        background-color: rgba(255, 255, 255, 0.5);\n                    }\n                    #${e}.${n.ZOID}-context-${t.POPUP} {\n                        cursor: pointer;\n                    }\n                    #${e}.${n.ZOID}-context-${t.IFRAME} .${n.OUTLET} {\n                        box-shadow: 2px 2px 10px 3px rgba(0, 0, 0, 0.4);\n                        position: fixed;\n                        top: 50%;\n                        left: 50%;\n                        transform: translate3d(-50%, -50%, 0);\n                        -webkit-transform: translate3d(-50%, -50%, 0);\n                        -moz-transform: translate3d(-50%, -50%, 0);\n                        -o-transform: translate3d(-50%, -50%, 0);\n                        -ms-transform: translate3d(-50%, -50%, 0);\n                    }\n                    #${e}.${n.ZOID}-context-${t.IFRAME} ${n.OUTLET} {\n                        height: 150px;\n                        width: 300px;\n                    }\n                    #${e}.${n.ZOID}-context-${t.IFRAME} ${n.OUTLET} iframe {\n                        height: 100%;\n                        width: 100%;\n                    }\n                    #${e} .${n.ZOID}-close {\n                        position: absolute;\n                        right: 16px;\n                        top: 16px;\n                        width: 16px;\n                        height: 16px;\n                        opacity: 0.6;\n                    }\n                    #${e} .${n.ZOID}-close:hover {\n                        opacity: 1;\n                    }\n                    #${e} .${n.ZOID}-close:before,\n                    #${e} .${n.ZOID}-close:after {\n                        position: absolute;\n                        left: 8px;\n                        content: ' ';\n                        height: 16px;\n                        width: 2px;\n                        background-color: white;\n                    }\n                    #${e} .${n.ZOID}-close:before {\n                        transform: rotate(45deg);\n                    }\n                    #${e} .${n.ZOID}-close:after {\n                        transform: rotate(-45deg);\n                    }\n                `))}});